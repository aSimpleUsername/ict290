<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ICT290 Assignment 1: :&lt;em&gt;Users_charl_OneDrive&lt;/em&gt;-_Murdoch_University_ICT290_Project_ict290_shayLearyALL_CAMPUS_TOUR_dependencies_SDL2_docs_README-android Android</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ICT290 Assignment 1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">:<em>Users_charl_OneDrive</em>-_Murdoch_University_ICT290_Project_ict290_shayLearyALL_CAMPUS_TOUR_dependencies_SDL2_docs_README-android Android </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Matt Styles wrote a tutorial on building SDL for Android with Visual Studio: <a href="http://trederia.blogspot.de/2017/03/building-sdl2-for-android-with-visual.html">http://trederia.blogspot.de/2017/03/building-sdl2-for-android-with-visual.html</a></p>
<p>The rest of this README covers the Android gradle style build process.</p>
<p>If you are using the older ant build process, it is no longer officially supported, but you can use the "android-project-ant" directory as a template.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md1"></a>
Requirements</h1>
<p>Android SDK (version 26 or later) <a href="https://developer.android.com/sdk/index.html">https://developer.android.com/sdk/index.html</a></p>
<p>Android NDK r15c or later <a href="https://developer.android.com/tools/sdk/ndk/index.html">https://developer.android.com/tools/sdk/ndk/index.html</a></p>
<p>Minimum API level supported by SDL: 16 (Android 4.1)</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md3"></a>
How the port works</h1>
<ul>
<li>Android applications are Java-based, optionally with parts written in C</li>
<li>As SDL apps are C-based, we use a small Java shim that uses JNI to talk to the SDL library</li>
<li>This means that your application C code must be placed inside an Android Java project, along with some C support code that communicates with Java</li>
<li>This eventually produces a standard Android .apk package</li>
</ul>
<p>The Android Java code implements an "Activity" and can be found in: android-project/app/src/main/java/org/libsdl/app/SDLActivity.java</p>
<p>The Java code loads your game code, the SDL shared library, and dispatches to native functions implemented in the SDL library: src/core/android/SDL_android.c</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md5"></a>
Building an app</h1>
<p>For simple projects you can use the script located at build-scripts/androidbuild.sh</p>
<p>There's two ways of using it: </p><pre class="fragment">androidbuild.sh com.yourcompany.yourapp &lt; sources.list
androidbuild.sh com.yourcompany.yourapp source1.c source2.c ...sourceN.c
</pre><p>sources.list should be a text file with a source file name in each line Filenames should be specified relative to the current directory, for example if you are in the build-scripts directory and want to create the testgles.c test, you'll run: </p><pre class="fragment">./androidbuild.sh org.libsdl.testgles ../test/testgles.c
</pre><p>One limitation of this script is that all sources provided will be aggregated into a single directory, thus all your source files should have a unique name.</p>
<p>Once the project is complete the script will tell you where the debug APK is located. If you want to create a signed release APK, you can use the project created by this utility to generate it.</p>
<p>Finally, a word of caution: re running androidbuild.sh wipes any changes you may have done in the build directory for the app!</p>
<p>For more complex projects, follow these instructions:</p>
<ol type="1">
<li>Copy the android-project directory wherever you want to keep your projects and rename it to the name of your project.</li>
<li>Move or symlink this SDL directory into the "&lt;project&gt;/app/jni" directory</li>
<li>Edit "&lt;project&gt;/app/jni/src/Android.mk" to include your source files</li>
</ol>
<p>4a. If you want to use Android Studio, simply open your &lt;project&gt; directory and start building.</p>
<p>4b. If you want to build manually, run './gradlew installDebug' in the project directory. This compiles the .java, creates an .apk with the native code embedded, and installs it on any connected Android device</p>
<p>If you already have a project that uses CMake, the instructions change somewhat:</p>
<ol type="1">
<li>Do points 1 and 2 from the instruction above.</li>
<li>Edit "&lt;project&gt;/app/build.gradle" to comment out or remove sections containing ndk-build and uncomment the cmake sections. Add arguments to the CMake invocation as needed.</li>
<li>Edit "&lt;project&gt;/app/jni/CMakeLists.txt" to include your project (it defaults to adding the "src" subdirectory). Note that you'll have SDL2, SDL2main and SDL2-static as targets in your project, so you should have "target_link_libraries(yourgame SDL2 SDL2main)" in your CMakeLists.txt file. Also be aware that you should use add_library() instead of add_executable() for the target containing your "main" function.</li>
</ol>
<p>If you wish to use Android Studio, you can skip the last step.</p>
<ol type="1">
<li>Run './gradlew installDebug' or './gradlew installRelease' in the project directory. It will build and install your .apk on any connected Android device</li>
</ol>
<p>Here's an explanation of the files in the Android project, so you can customize them: </p><pre class="fragment">android-project/app
    build.gradle            - build info including the application version and SDK
    src/main/AndroidManifest.xml    - package manifest. Among others, it contains the class name of the main Activity and the package name of the application.
    jni/            - directory holding native code
    jni/Application.mk  - Application JNI settings, including target platform and STL library
    jni/Android.mk      - Android makefile that can call recursively the Android.mk files in all subdirectories
    jni/CMakeLists.txt  - Top-level CMake project that adds SDL as a subproject
    jni/SDL/        - (symlink to) directory holding the SDL library files
    jni/SDL/Android.mk  - Android makefile for creating the SDL shared library
    jni/src/        - directory holding your C/C++ source
    jni/src/Android.mk  - Android makefile that you should customize to include your source code and any library references
    jni/src/CMakeLists.txt  - CMake file that you may customize to include your source code and any library references
    src/main/assets/    - directory holding asset files for your application
    src/main/res/       - directory holding resources for your application
    src/main/res/mipmap-*   - directories holding icons for different phone hardware
    src/main/res/values/strings.xml - strings used in your application, including the application name
    src/main/java/org/libsdl/app/SDLActivity.java - the Java class handling the initialization and binding to SDL. Be very careful changing this, as the SDL library relies on this implementation. You should instead subclass this for your application.
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md6"></a>
Customizing your application name</h1>
<p>To customize your application name, edit AndroidManifest.xml and replace "org.libsdl.app" with an identifier for your product package.</p>
<p>Then create a Java class extending SDLActivity and place it in a directory under src matching your package, e.g. </p><pre class="fragment">src/com/gamemaker/game/MyGame.java
</pre><p>Here's an example of a minimal class file: </p><pre class="fragment">--- MyGame.java --------------------------
package com.gamemaker.game;

import org.libsdl.app.SDLActivity; 

/**
 * A sample wrapper class that just calls SDLActivity 
 */ 

public class MyGame extends SDLActivity { }

------------------------------------------
</pre><p>Then replace "SDLActivity" in AndroidManifest.xml with the name of your class, .e.g. "MyGame"</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md8"></a>
Customizing your application icon</h1>
<p>Conceptually changing your icon is just replacing the "ic_launcher.png" files in the drawable directories under the res directory. There are several directories for different screen sizes.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md10"></a>
Loading assets</h1>
<p>Any files you put in the "app/src/main/assets" directory of your project directory will get bundled into the application package and you can load them using the standard functions in SDL_rwops.h.</p>
<p>There are also a few Android specific functions that allow you to get other useful paths for saving and loading data:</p><ul>
<li>SDL_AndroidGetInternalStoragePath()</li>
<li>SDL_AndroidGetExternalStorageState()</li>
<li>SDL_AndroidGetExternalStoragePath()</li>
</ul>
<p>See SDL_system.h for more details on these functions.</p>
<p>The asset packaging system will, by default, compress certain file extensions. SDL includes two asset file access mechanisms, the preferred one is the so called "File Descriptor" method, which is faster and doesn't involve the Dalvik GC, but given this method does not work on compressed assets, there is also the "Input Stream" method, which is automatically used as a fall back by SDL. You may want to keep this fact in mind when building your APK, specially when large files are involved. For more information on which extensions get compressed by default and how to disable this behaviour, see for example:</p>
<p><a href="http://ponystyle.com/blog/2010/03/26/dealing-with-asset-compression-in-android-apps/">http://ponystyle.com/blog/2010/03/26/dealing-with-asset-compression-in-android-apps/</a></p>
<hr  />
 <h1><a class="anchor" id="autotoc_md12"></a>
Pause / Resume behaviour</h1>
<p>If SDL_HINT_ANDROID_BLOCK_ON_PAUSE hint is set (the default), the event loop will block itself when the app is paused (ie, when the user returns to the main Android dashboard). Blocking is better in terms of battery use, and it allows your app to spring back to life instantaneously after resume (versus polling for a resume message).</p>
<p>Upon resume, SDL will attempt to restore the GL context automatically. In modern devices (Android 3.0 and up) this will most likely succeed and your app can continue to operate as it was.</p>
<p>However, there's a chance (on older hardware, or on systems under heavy load), where the GL context can not be restored. In that case you have to listen for a specific message, (which is not yet implemented!) and restore your textures manually or quit the app (which is actually the kind of behaviour you'll see under iOS, if the OS can not restore your GL context it will just kill your app)</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md14"></a>
Threads and the Java VM</h1>
<p>For a quick tour on how Linux native threads interoperate with the Java VM, take a look here: <a href="https://developer.android.com/guide/practices/jni.html">https://developer.android.com/guide/practices/jni.html</a></p>
<p>If you want to use threads in your SDL app, it's strongly recommended that you do so by creating them using SDL functions. This way, the required attach/detach handling is managed by SDL automagically. If you have threads created by other means and they make calls to SDL functions, make sure that you call Android_JNI_SetupThread() before doing anything else otherwise SDL will attach your thread automatically anyway (when you make an SDL call), but it'll never detach it.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md16"></a>
Using STL</h1>
<p>You can use STL in your project by creating an Application.mk file in the jni folder and adding the following line: </p><pre class="fragment">APP_STL := c++_shared
</pre><p>For more information go here: <a href="https://developer.android.com/ndk/guides/cpp-support">https://developer.android.com/ndk/guides/cpp-support</a></p>
<hr  />
 <h1><a class="anchor" id="autotoc_md18"></a>
Using the emulator</h1>
<p>There are some good tips and tricks for getting the most out of the emulator here: <a href="https://developer.android.com/tools/devices/emulator.html">https://developer.android.com/tools/devices/emulator.html</a></p>
<p>Especially useful is the info on setting up OpenGL ES 2.0 emulation.</p>
<p>Notice that this software emulator is incredibly slow and needs a lot of disk space. Using a real device works better.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md20"></a>
Troubleshooting</h1>
<p>You can see if adb can see any devices with the following command: </p><pre class="fragment">adb devices
</pre><p>You can see the output of log messages on the default device with: </p><pre class="fragment">adb logcat
</pre><p>You can push files to the device with: </p><pre class="fragment">adb push local_file remote_path_and_file
</pre><p>You can push files to the SD Card at /sdcard, for example: </p><pre class="fragment">adb push moose.dat /sdcard/moose.dat
</pre><p>You can see the files on the SD card with a shell command: </p><pre class="fragment">adb shell ls /sdcard/
</pre><p>You can start a command shell on the default device with: </p><pre class="fragment">adb shell
</pre><p>You can remove the library files of your project (and not the SDL lib files) with: </p><pre class="fragment">ndk-build clean
</pre><p>You can do a build with the following command: </p><pre class="fragment">ndk-build
</pre><p>You can see the complete command line that ndk-build is using by passing V=1 on the command line: </p><pre class="fragment">ndk-build V=1
</pre><p>If your application crashes in native code, you can use ndk-stack to get a symbolic stack trace: <a href="https://developer.android.com/ndk/guides/ndk-stack">https://developer.android.com/ndk/guides/ndk-stack</a></p>
<p>If you want to go through the process manually, you can use addr2line to convert the addresses in the stack trace to lines in your code.</p>
<p>For example, if your crash looks like this: </p><pre class="fragment">I/DEBUG   (   31): signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 400085d0
I/DEBUG   (   31):  r0 00000000  r1 00001000  r2 00000003  r3 400085d4
I/DEBUG   (   31):  r4 400085d0  r5 40008000  r6 afd41504  r7 436c6a7c
I/DEBUG   (   31):  r8 436c6b30  r9 435c6fb0  10 435c6f9c  fp 4168d82c
I/DEBUG   (   31):  ip 8346aff0  sp 436c6a60  lr afd1c8ff  pc afd1c902  cpsr 60000030
I/DEBUG   (   31):          #00  pc 0001c902  /system/lib/libc.so
I/DEBUG   (   31):          #01  pc 0001ccf6  /system/lib/libc.so
I/DEBUG   (   31):          #02  pc 000014bc  /data/data/org.libsdl.app/lib/libmain.so
I/DEBUG   (   31):          #03  pc 00001506  /data/data/org.libsdl.app/lib/libmain.so
</pre><p>You can see that there's a crash in the C library being called from the main code. I run addr2line with the debug version of my code: </p><pre class="fragment">arm-eabi-addr2line -C -f -e obj/local/armeabi/libmain.so
</pre><p>and then paste in the number after "pc" in the call stack, from the line that I care about: 000014bc</p>
<p>I get output from addr2line showing that it's in the quit function, in testspriteminimal.c, on line 23.</p>
<p>You can add logging to your code to help show what's happening: </p><pre class="fragment">#include &lt;android/log.h&gt;

__android_log_print(ANDROID_LOG_INFO, "foo", "Something happened! x = %d", x);
</pre><p>If you need to build without optimization turned on, you can create a file called "Application.mk" in the jni directory, with the following line in it: </p><pre class="fragment">APP_OPTIM := debug
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md21"></a>
Memory debugging</h1>
<p>The best (and slowest) way to debug memory issues on Android is valgrind. Valgrind has support for Android out of the box, just grab code using: </p><pre class="fragment">svn co svn://svn.valgrind.org/valgrind/trunk valgrind
</pre><p>... and follow the instructions in the file README.android to build it.</p>
<p>One thing I needed to do on Mac OS X was change the path to the toolchain, and add ranlib to the environment variables: export RANLIB=$NDKROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-ranlib</p>
<p>Once valgrind is built, you can create a wrapper script to launch your application with it, changing org.libsdl.app to your package identifier: </p><pre class="fragment">--- start_valgrind_app -------------------
#!/system/bin/sh
export TMPDIR=/data/data/org.libsdl.app
exec /data/local/Inst/bin/valgrind --log-file=/sdcard/valgrind.log --error-limit=no $*
------------------------------------------
</pre><p>Then push it to the device: </p><pre class="fragment">adb push start_valgrind_app /data/local
</pre><p>and make it executable: </p><pre class="fragment">adb shell chmod 755 /data/local/start_valgrind_app
</pre><p>and tell Android to use the script to launch your application: </p><pre class="fragment">adb shell setprop wrap.org.libsdl.app "logwrapper /data/local/start_valgrind_app"
</pre><p>If the setprop command says "could not set property", it's likely that your package name is too long and you should make it shorter by changing AndroidManifest.xml and the path to your class file in android-project/src</p>
<p>You can then launch your application normally and waaaaaaaiiittt for it. You can monitor the startup process with the logcat command above, and when it's done (or even while it's running) you can grab the valgrind output file: </p><pre class="fragment">adb pull /sdcard/valgrind.log
</pre><p>When you're done instrumenting with valgrind, you can disable the wrapper: </p><pre class="fragment">adb shell setprop wrap.org.libsdl.app ""
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md22"></a>
Graphics debugging</h1>
<p>If you are developing on a compatible Tegra-based tablet, NVidia provides Tegra Graphics Debugger at their website. Because SDL2 dynamically loads EGL and GLES libraries, you must follow their instructions for installing the interposer library on a rooted device. The non-rooted instructions are not compatible with applications that use SDL2 for video.</p>
<p>The Tegra Graphics Debugger is available from NVidia here: <a href="https://developer.nvidia.com/tegra-graphics-debugger">https://developer.nvidia.com/tegra-graphics-debugger</a></p>
<hr  />
 <h1><a class="anchor" id="autotoc_md24"></a>
Why is API level 16 the minimum required?</h1>
<p>The latest NDK toolchain doesn't support targeting earlier than API level 16. As of this writing, according to <a href="https://developer.android.com/about/dashboards/index.html">https://developer.android.com/about/dashboards/index.html</a> about 99% of the Android devices accessing Google Play support API level 16 or higher (January 2018).</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md26"></a>
A note regarding the use of the "dirty rectangles" rendering technique</h1>
<p>If your app uses a variation of the "dirty rectangles" rendering technique, where you only update a portion of the screen on each frame, you may notice a variety of visual glitches on Android, that are not present on other platforms. This is caused by SDL's use of EGL as the support system to handle OpenGL ES/ES2 contexts, in particular the use of the eglSwapBuffers function. As stated in the documentation for the function "The contents of ancillary buffers are always 
undefined after calling eglSwapBuffers". Setting the EGL_SWAP_BEHAVIOR attribute of the surface to EGL_BUFFER_PRESERVED is not possible for SDL as it requires EGL 1.4, available only on the API level 17+, so the only workaround available on this platform is to redraw the entire screen each frame.</p>
<p>Reference: <a href="http://www.khronos.org/registry/egl/specs/EGLTechNote0001.html">http://www.khronos.org/registry/egl/specs/EGLTechNote0001.html</a></p>
<hr  />
 <h1><a class="anchor" id="autotoc_md28"></a>
Ending your application</h1>
<p>Two legitimate ways:</p>
<ul>
<li>return from your <a class="el" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> function. Java side will automatically terminate the Activity by calling Activity.finish().</li>
<li>Android OS can decide to terminate your application by calling onDestroy() (see Activity life cycle). Your application will receive a SDL_QUIT event you can handle to save things and quit.</li>
</ul>
<p>Don't call exit() as it stops the activity badly.</p>
<p>NB: "Back button" can be handled as a SDL_KEYDOWN/UP events, with Keycode SDLK_AC_BACK, for any purpose.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md30"></a>
Known issues</h1>
<ul>
<li>The number of buttons reported for each joystick is hardcoded to be 36, which is the current maximum number of buttons Android can report.</li>
</ul>
<p>(www.cmake.org)</p>
<p>SDL's build system was traditionally based on autotools. Over time, this approach has suffered from several issues across the different supported platforms. To solve these problems, a new build system based on CMake is under development. It works in parallel to the legacy system, so users can experiment with it without complication. While still experimental, the build system should be usable on the following platforms:</p>
<ul>
<li>FreeBSD</li>
<li>Linux</li>
<li>VS.NET 2010</li>
<li>MinGW and Msys</li>
<li>macOS, iOS, and tvOS, with support for XCode</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md32"></a>
Usage</h1>
<p>Assuming the source for SDL is located at ~/sdl </p><pre class="fragment">cd ~
mkdir build
cd build
cmake ../sdl
</pre><p>This will build the static and dynamic versions of SDL in the ~/build directory.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md34"></a>
Usage, iOS/tvOS</h1>
<p>CMake 3.14+ natively includes support for iOS and tvOS. SDL binaries may be built using Xcode or Make, possibly among other build-systems.</p>
<p>When using a recent version of CMake (3.14+), it should be possible to:</p>
<ul>
<li>build SDL for iOS, both static and dynamic</li>
<li>build SDL test apps (as iOS/tvOS .app bundles)</li>
<li>generate a working SDL_config.h for iOS (using SDL_config.h.cmake as a basis)</li>
</ul>
<p>To use, set the following CMake variables when running CMake's configuration stage:</p>
<ul>
<li><code>CMAKE_SYSTEM_NAME=&lt;OS&gt;</code> (either <code>iOS</code> or <code>tvOS</code>)</li>
<li><code>CMAKE_OSX_SYSROOT=&lt;SDK&gt;</code> (examples: <code>iphoneos</code>, <code>iphonesimulator</code>, <code>iphoneos12.4</code>, <code>/full/path/to/iPhoneOS.sdk</code>, <code>appletvos</code>, <code>appletvsimulator</code>, <code>appletvos12.4</code>, <code>/full/path/to/AppleTVOS.sdk</code>, etc.)</li>
<li><code>CMAKE_OSX_ARCHITECTURES=&lt;semicolon-separated list of CPU architectures&gt;</code> (example: "arm64;armv7s;x86_64")</li>
</ul>
<h3><a class="anchor" id="autotoc_md35"></a>
Examples (for iOS/tvOS):</h3>
<ul>
<li><p class="startli">for iOS-Simulator, using the latest, installed SDK:</p>
<p class="startli"><code>cmake ~/sdl -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_SYSROOT=iphonesimulator -DCMAKE_OSX_ARCHITECTURES=x86_64</code></p>
</li>
<li><p class="startli">for iOS-Device, using the latest, installed SDK, 64-bit only</p>
<p class="startli"><code>cmake ~/sdl -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_SYSROOT=iphoneos -DCMAKE_OSX_ARCHITECTURES=arm64</code></p>
</li>
<li><p class="startli">for iOS-Device, using the latest, installed SDK, mixed 32/64 bit</p>
<p class="startli"><code>cmake ~/sdl -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_SYSROOT=iphoneos -DCMAKE_OSX_ARCHITECTURES="arm64;armv7s"</code></p>
</li>
<li><p class="startli">for iOS-Device, using a specific SDK revision (iOS 12.4, in this example):</p>
<p class="startli"><code>cmake ~/sdl -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_SYSROOT=iphoneos12.4 -DCMAKE_OSX_ARCHITECTURES=arm64</code></p>
</li>
<li><p class="startli">for iOS-Simulator, using the latest, installed SDK, and building SDL test apps (as .app bundles):</p>
<p class="startli"><code>cmake ~/sdl -DSDL_TEST=1 -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_SYSROOT=iphonesimulator -DCMAKE_OSX_ARCHITECTURES=x86_64</code></p>
</li>
<li><p class="startli">for tvOS-Simulator, using the latest, installed SDK:</p>
<p class="startli"><code>cmake ~/sdl -DCMAKE_SYSTEM_NAME=tvOS -DCMAKE_OSX_SYSROOT=appletvsimulator -DCMAKE_OSX_ARCHITECTURES=x86_64</code></p>
</li>
<li><p class="startli">for tvOS-Device, using the latest, installed SDK:</p>
<p class="startli"><code>cmake ~/sdl -DCMAKE_SYSTEM_NAME=tvOS -DCMAKE_OSX_SYSROOT=appletvos -DCMAKE_OSX_ARCHITECTURES=arm64</code></p>
</li>
</ul>
<p>Supports:</p>
<ul>
<li>Hardware YUV overlays</li>
<li>OpenGL - software only</li>
<li>2D/3D accelerations (depends on directfb driver)</li>
<li>multiple displays</li>
<li>windows</li>
</ul>
<p>What you need:</p>
<ul>
<li>DirectFB 1.0.1, 1.2.x, 1.3.0</li>
<li>Kernel-Framebuffer support: required: vesafb, radeonfb ....</li>
<li>Mesa 7.0.x - optional for OpenGL</li>
</ul>
<p>/etc/directfbrc</p>
<p>This file should contain the following lines to make </p>
<h1><a class="anchor" id="autotoc_md36"></a>
your joystick work and avoid crashes:</h1>
<p>disable-module=joystick disable-module=cle266 disable-module=cyber5k </p>
<h1><a class="anchor" id="autotoc_md37"></a>
no-linux-input-grab</h1>
<p>To disable to use x11 backend when DISPLAY variable is found use</p>
<p>export SDL_DIRECTFB_X11_CHECK=0</p>
<p>To disable the use of linux input devices, i.e. multimice/multikeyboard support, use</p>
<p>export SDL_DIRECTFB_LINUX_INPUT=0</p>
<p>To use hardware accelerated YUV-overlays for YUV-textures, use:</p>
<p>export SDL_DIRECTFB_YUV_DIRECT=1</p>
<p>This is disabled by default. It will only support one YUV texture, namely the first. Every other YUV texture will be rendered in software.</p>
<p>In addition, you may use (directfb-1.2.x)</p>
<p>export SDL_DIRECTFB_YUV_UNDERLAY=1</p>
<p>to make the YUV texture an underlay. This will make the cursor to be shown.</p>
<h1><a class="anchor" id="autotoc_md38"></a>
Simple Window Manager</h1>
<p>The driver has support for a very, very basic window manager you may want to use when running with "wm=default". Use</p>
<p>export SDL_DIRECTFB_WM=1</p>
<p>to enable basic window borders. In order to have the window title rendered, you need to have the following font installed:</p>
<p>/usr/share/fonts/truetype/freefont/FreeSans.ttf</p>
<h1><a class="anchor" id="autotoc_md39"></a>
OpenGL Support</h1>
<p>The following instructions will give you <em>software</em> OpenGL. However this works at least on all directfb supported platforms.</p>
<p>As of this writing 20100802 you need to pull Mesa from git and do the following:</p>
<hr  />
<p> git clone git://anongit.freedesktop.org/git/mesa/mesa cd mesa </p>
<h2><a class="anchor" id="autotoc_md41"></a>
git checkout 2c9fdaf7292423c157fc79b5ce43f0f199dd753a</h2>
<h2><a class="anchor" id="autotoc_md42"></a>
Edit configs/linux-directfb so that the Directories-section looks like</h2>
<h1><a class="anchor" id="autotoc_md43"></a>
Directories</h1>
<p>SRC_DIRS = mesa glu GLU_DIRS = sgi DRIVER_DIRS = directfb </p>
<h2><a class="anchor" id="autotoc_md44"></a>
PROGRAM_DIRS =</h2>
<p>make linux-directfb make</p>
<p>echo Installing - please enter sudo pw.</p>
<p>sudo make install INSTALL_DIR=/usr/local/dfb_GL cd src/mesa/drivers/directfb make </p>
<h2><a class="anchor" id="autotoc_md45"></a>
sudo make install INSTALL_DIR=/usr/local/dfb_GL</h2>
<p>To run the SDL - testprograms:</p>
<p>export SDL_VIDEODRIVER=directfb export LD_LIBRARY_PATH=/usr/local/dfb_GL/lib export LD_PRELOAD=/usr/local/dfb_GL/libGL.so.7</p>
<p>./testgl</p>
<p>Originally posted by Ryan at: <a href="https://plus.google.com/103391075724026391227/posts/TB8UfnDYu4U">https://plus.google.com/103391075724026391227/posts/TB8UfnDYu4U</a></p>
<p>Background:</p>
<ul>
<li>The Steam Runtime has (at least in theory) a really kick-ass build of SDL2, but developers are shipping their own SDL2 with individual Steam games. These games might stop getting updates, but a newer SDL2 might be needed later. Certainly we'll always be fixing bugs in SDL, even if a new video target isn't ever needed, and these fixes won't make it to a game shipping its own SDL.</li>
<li>Even if we replace the SDL2 in those games with a compatible one, that is to say, edit a developer's Steam depot (yuck!), there are developers that are statically linking SDL2 that we can't do this for. We can't even force the dynamic loader to ignore their SDL2 in this case, of course.</li>
<li>If you don't ship an SDL2 with the game in some form, people that disabled the Steam Runtime, or just tried to run the game from the command line instead of Steam might find themselves unable to run the game, due to a missing dependency.</li>
<li>If you want to ship on non-Steam platforms like GOG or Humble Bundle, or target generic Linux boxes that may or may not have SDL2 installed, you have to ship the library or risk a total failure to launch. So now, you might have to have a non-Steam build plus a Steam build (that is, one with and one without SDL2 included), which is inconvenient if you could have had one universal build that works everywhere.</li>
<li>We like the zlib license, but the biggest complaint from the open source community about the license change is the static linking. The LGPL forced this as a legal, not technical issue, but zlib doesn't care. Even those that aren't concerned about the GNU freedoms found themselves solving the same problems: swapping in a newer SDL to an older game often times can save the day. Static linking stops this dead.</li>
</ul>
<p>So here's what we did:</p>
<p>SDL now has, internally, a table of function pointers. So, this is what SDL_Init now looks like: </p><pre class="fragment">UInt32 SDL_Init(Uint32 flags)
{
    return jump_table.SDL_Init(flags);
}
</pre><p>Except that is all done with a bunch of macro magic so we don't have to maintain every one of these.</p>
<p>What is jump_table.SDL_init()? Eventually, that's a function pointer of the real <a class="el" href="_s_d_l_8h.html#a8fc8d35348d7c74bad8392d776c937b8">SDL_Init()</a> that you've been calling all this time. But at startup, it looks more like this: </p><pre class="fragment">Uint32 SDL_Init_DEFAULT(Uint32 flags)
{
    SDL_InitDynamicAPI();
    return jump_table.SDL_Init(flags);
}
</pre><p>SDL_InitDynamicAPI() fills in jump_table with all the actual SDL function pointers, which means that this _DEFAULT function never gets called again. First call to any SDL function sets the whole thing up.</p>
<p>So you might be asking, what was the value in that? Isn't this what the operating system's dynamic loader was supposed to do for us? Yes, but now we've got this level of indirection, we can do things like this: </p><pre class="fragment">export SDL_DYNAMIC_API=/my/actual/libSDL-2.0.so.0
./MyGameThatIsStaticallyLinkedToSDL2
</pre><p>And now, this game that is statically linked to SDL, can still be overridden with a newer, or better, SDL. The statically linked one will only be used as far as calling into the jump table in this case. But in cases where no override is desired, the statically linked version will provide its own jump table, and everyone is happy.</p>
<p>So now:</p><ul>
<li>Developers can statically link SDL, and users can still replace it. (We'd still rather you ship a shared library, though!)</li>
<li>Developers can ship an SDL with their game, Valve can override it for, say, new features on SteamOS, or distros can override it for their own needs, but it'll also just work in the default case.</li>
<li>Developers can ship the same package to everyone (Humble Bundle, GOG, etc), and it'll do the right thing.</li>
<li>End users (and Valve) can update a game's SDL in almost any case, to keep abandoned games running on newer platforms.</li>
<li>Everyone develops with SDL exactly as they have been doing all along. Same headers, same ABI. Just get the latest version to enable this magic.</li>
</ul>
<p>A little more about SDL_InitDynamicAPI():</p>
<p>Internally, InitAPI does some locking to make sure everything waits until a single thread initializes everything (although even <a class="el" href="_s_d_l__thread_8h.html#aca3013d4f50e918b17d2721b37e59082">SDL_CreateThread()</a> goes through here before spinning a thread, too), and then decides if it should use an external SDL library. If not, it sets up the jump table using the current SDL's function pointers (which might be statically linked into a program, or in a shared library of its own). If so, it loads that library and looks for and calls a single function: </p><pre class="fragment">SInt32 SDL_DYNAPI_entry(Uint32 version, void *table, Uint32 tablesize);
</pre><p>That function takes a version number (more on that in a moment), the address of the jump table, and the size, in bytes, of the table. Now, we've got policy here: this table's layout never changes; new stuff gets added to the end. Therefore SDL_DYNAPI_entry() knows that it can provide all the needed functions if tablesize &lt;= sizeof its own jump table. If tablesize is bigger (say, SDL 2.0.4 is trying to load SDL 2.0.3), then we know to abort, but if it's smaller, we know we can provide the entire API that the caller needs.</p>
<p>The version variable is a failsafe switch. Right now it's always 1. This number changes when there are major API changes (so we know if the tablesize might be smaller, or entries in it have changed). Right now SDL_DYNAPI_entry gives up if the version doesn't match, but it's not inconceivable to have a small dispatch library that only supplies this one function and loads different, otherwise-incompatible SDL libraries and has the right one initialize the jump table based on the version. For something that must generically catch lots of different versions of SDL over time, like the Steam Client, this isn't a bad option.</p>
<p>Finally, I'm sure some people are reading this and thinking, "I don't want that overhead in my project!" <br  />
 To which I would point out that the extra function call through the jump table probably wouldn't even show up in a profile, but lucky you: this can all be disabled. You can build SDL without this if you absolutely must, but we would encourage you not to do that. However, on heavily locked down platforms like iOS, or maybe when debugging, it makes sense to disable it. The way this is designed in SDL, you just have to change one #define, and the entire system vaporizes out, and SDL functions exactly like it always did. Most of it is macro magic, so the system is contained to one C file and a few headers. However, this is on by default and you have to edit a header file to turn it off. Our hopes is that if we make it easy to disable, but not too easy, everyone will ultimately be able to get what they want, but we've gently nudged everyone towards what we think is the best solution.</p>
<p>Build: </p><pre class="fragment">$ mkdir build
$ cd build
$ emconfigure ../configure --host=asmjs-unknown-emscripten --disable-assembly --disable-threads --disable-cpuinfo CFLAGS="-O2"
$ emmake make
</pre><p>Or with cmake: </p><pre class="fragment">$ mkdir build
$ cd build
$ emcmake cmake ..
$ emmake make
</pre><p>To build one of the tests: </p><pre class="fragment">$ cd test/
$ emcc -O2 --js-opts 0 -g4 testdraw2.c -I../include ../build/.libs/libSDL2.a ../build/libSDL2_test.a -o a.html
</pre><p>Uses GLES2 renderer or software</p>
<p>Some other SDL2 libraries can be easily built (assuming SDL2 is installed somewhere):</p>
<p>SDL_mixer (<a href="http://www.libsdl.org/projects/SDL_mixer/">http://www.libsdl.org/projects/SDL_mixer/</a>): </p><pre class="fragment">$ EMCONFIGURE_JS=1 emconfigure ../configure
build as usual...
</pre><p>SDL_gfx (<a href="http://cms.ferzkopp.net/index.php/software/13-sdl-gfx">http://cms.ferzkopp.net/index.php/software/13-sdl-gfx</a>): </p><pre class="fragment">$ EMCONFIGURE_JS=1 emconfigure ../configure --disable-mmx
build as usual...
</pre><p>SDL provides an implementation of the $1 gesture recognition system. This allows for recording, saving, loading, and performing single stroke gestures.</p>
<p>Gestures can be performed with any number of fingers (the centroid of the fingers must follow the path of the gesture), but the number of fingers must be constant (a finger cannot go down in the middle of a gesture). The path of a gesture is considered the path from the time when the final finger went down, to the first time any finger comes up.</p>
<p>Dollar gestures are assigned an Id based on a hash function. This is guaranteed to remain constant for a given gesture. There is a (small) chance that two different gestures will be assigned the same ID. In this case, simply re-recording one of the gestures should result in a different ID.</p>
<h1><a class="anchor" id="autotoc_md46"></a>
Recording:</h1>
<p>To begin recording on a touch device call: <a class="el" href="_s_d_l__gesture_8h.html#ad06776e2e199d5d48e466a0ecbbb06c3" title="Begin Recording a gesture on the specified touch, or all touches (-1)">SDL_RecordGesture(SDL_TouchID touchId)</a>, where touchId is the id of the touch device you wish to record on, or -1 to record on all connected devices.</p>
<p>Recording terminates as soon as a finger comes up. Recording is acknowledged by an SDL_DOLLARRECORD event. A SDL_DOLLARRECORD event is a dgesture with the following fields:</p>
<ul>
<li>event.dgesture.touchId - the Id of the touch used to record the gesture.</li>
<li>event.dgesture.gestureId - the unique id of the recorded gesture.</li>
</ul>
<h1><a class="anchor" id="autotoc_md47"></a>
Performing:</h1>
<p>As long as there is a dollar gesture assigned to a touch, every finger-up event will also cause an SDL_DOLLARGESTURE event with the following fields:</p>
<ul>
<li>event.dgesture.touchId - the Id of the touch which performed the gesture.</li>
<li>event.dgesture.gestureId - the unique id of the closest gesture to the performed stroke.</li>
<li>event.dgesture.error - the difference between the gesture template and the actual performed gesture. Lower error is a better match.</li>
<li>event.dgesture.numFingers - the number of fingers used to draw the stroke.</li>
</ul>
<p>Most programs will want to define an appropriate error threshold and check to be sure that the error of a gesture is not abnormally high (an indicator that no gesture was performed).</p>
<h1><a class="anchor" id="autotoc_md48"></a>
Saving:</h1>
<p>To save a template, call SDL_SaveDollarTemplate(gestureId, dst) where gestureId is the id of the gesture you want to save, and dst is an <a class="el" href="struct_s_d_l___r_wops.html">SDL_RWops</a> pointer to the file where the gesture will be stored.</p>
<p>To save all currently loaded templates, call SDL_SaveAllDollarTemplates(dst) where dst is an <a class="el" href="struct_s_d_l___r_wops.html">SDL_RWops</a> pointer to the file where the gesture will be stored.</p>
<p>Both functions return the number of gestures successfully saved.</p>
<h1><a class="anchor" id="autotoc_md49"></a>
Loading:</h1>
<p>To load templates from a file, call SDL_LoadDollarTemplates(touchId,src) where touchId is the id of the touch to load to (or -1 to load to all touch devices), and src is an <a class="el" href="struct_s_d_l___r_wops.html">SDL_RWops</a> pointer to a gesture save file.</p>
<p>SDL_LoadDollarTemplates returns the number of templates successfully loaded.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md51"></a>
Multi Gestures</h1>
<p>SDL provides simple support for pinch/rotate/swipe gestures. Every time a finger is moved an SDL_MULTIGESTURE event is sent with the following fields:</p>
<ul>
<li>event.mgesture.touchId - the Id of the touch on which the gesture was performed.</li>
<li>event.mgesture.x - the normalized x coordinate of the gesture. (0..1)</li>
<li>event.mgesture.y - the normalized y coordinate of the gesture. (0..1)</li>
<li>event.mgesture.dTheta - the amount that the fingers rotated during this motion.</li>
<li>event.mgesture.dDist - the amount that the fingers pinched during this motion.</li>
<li>event.mgesture.numFingers - the number of fingers used in the gesture.</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md53"></a>
Notes</h1>
<p>For a complete example see test/testgesture.c</p>
<p>Please direct questions/comments to: <a href="#" onclick="location.href='mai'+'lto:'+'jim'+'.t'+'la+'+'sd'+'l_t'+'ou'+'ch@'+'gm'+'ail'+'.c'+'om'; return false;">jim.t<span style="display: none;">.nosp@m.</span>la+s<span style="display: none;">.nosp@m.</span>dl_to<span style="display: none;">.nosp@m.</span>uch@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a></p>
<p>The latest development version of SDL is available via Mercurial. Mercurial allows you to get up-to-the-minute fixes and enhancements; as a developer works on a source tree, you can use "hg" to mirror that source tree instead of waiting for an official release. Please look at the Mercurial website ( <a href="https://www.mercurial-scm.org/">https://www.mercurial-scm.org/</a> ) for more information on using hg, where you can also download software for Mac OS X, Windows, and Unix systems. </p><pre class="fragment">hg clone http://hg.libsdl.org/SDL
</pre><p>If you are building SDL via configure, you will need to run autogen.sh before running configure.</p>
<p>There is a web interface to the subversion repository at: <a href="http://hg.libsdl.org/SDL/">http://hg.libsdl.org/SDL/</a></p>
<p>There is an RSS feed available at that URL, for those that want to track commits in real time.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md55"></a>
Building the Simple DirectMedia Layer for iOS 5.1+</h1>
<p>Requirements: Mac OS X 10.8 or later and the iOS 7+ SDK.</p>
<p>Instructions:</p>
<ol type="1">
<li>Open SDL.xcodeproj (located in Xcode-iOS/SDL) in Xcode.</li>
<li>Select your desired target, and hit build.</li>
</ol>
<p>There are three build targets:</p><ul>
<li>libSDL.a: Build SDL as a statically linked library</li>
<li>testsdl: Build a test program (there are known test failures which are fine)</li>
<li>Template: Package a project template together with the SDL for iPhone static libraries and copies of the SDL headers. The template includes proper references to the SDL library and headers, skeleton code for a basic SDL program, and placeholder graphics for the application icon and startup screen.</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md57"></a>
Build SDL for iOS from the command line</h1>
<ol type="1">
<li>cd (PATH WHERE THE SDL CODE IS)/build-scripts</li>
<li>./iosbuild.sh</li>
</ol>
<p>If everything goes fine, you should see a build/ios directory, inside there's two directories "lib" and "include". "include" contains a copy of the SDL headers that you'll need for your project, make sure to configure XCode to look for headers there. "lib" contains find two files, libSDL2.a and libSDL2main.a, you have to add both to your XCode project. These libraries contain three architectures in them, armv6 for legacy devices, armv7, and i386 (for the simulator). By default, iosbuild.sh will autodetect the SDK version you have installed using xcodebuild -showsdks, and build for iOS &gt;= 3.0, you can override this behaviour by setting the MIN_OS_VERSION variable, ie:</p>
<p>MIN_OS_VERSION=4.2 ./iosbuild.sh</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md59"></a>
Using the Simple DirectMedia Layer for iOS</h1>
<p>FIXME: This needs to be updated for the latest methods</p>
<p>Here is the easiest method:</p><ol type="1">
<li>Build the SDL library (libSDL2.a) and the iPhone SDL Application template.</li>
<li>Install the iPhone SDL Application template by copying it to one of Xcode's template directories. I recommend creating a directory called "SDL" in "/Developer/Platforms/iOS.platform/Developer/Library/Xcode/Project Templates/" and placing it there.</li>
<li>Start a new project using the template. The project should be immediately ready for use with SDL.</li>
</ol>
<p>Here is a more manual method:</p><ol type="1">
<li>Create a new iOS view based application.</li>
<li>Build the SDL static library (libSDL2.a) for iOS and include them in your project. Xcode will ignore the library that is not currently of the correct architecture, hence your app will work both on iOS and in the iOS Simulator.</li>
<li>Include the SDL header files in your project.</li>
<li>Remove the ApplicationDelegate.h and ApplicationDelegate.m files &ndash; SDL for iOS provides its own UIApplicationDelegate. Remove MainWindow.xib &ndash; SDL for iOS produces its user interface programmatically.</li>
<li>Delete the contents of main.m and program your app as a regular SDL program instead. You may replace main.m with your own main.c, but you must tell Xcode not to use the project prefix file, as it includes Objective-C code.</li>
</ol>
<hr  />
 <h1><a class="anchor" id="autotoc_md61"></a>
Notes – Retina / High-DPI and window sizes</h1>
<p>Window and display mode sizes in SDL are in "screen coordinates" (or "points", in Apple's terminology) rather than in pixels. On iOS this means that a window created on an iPhone 6 will have a size in screen coordinates of 375 x 667, rather than a size in pixels of 750 x 1334. All iOS apps are expected to size their content based on screen coordinates / points rather than pixels, as this allows different iOS devices to have different pixel densities (Retina versus non-Retina screens, etc.) without apps caring too much.</p>
<p>By default SDL will not use the full pixel density of the screen on Retina/high-dpi capable devices. Use the SDL_WINDOW_ALLOW_HIGHDPI flag when creating your window to enable high-dpi support.</p>
<p>When high-dpi support is enabled, <a class="el" href="_s_d_l__video_8h.html#a5cbfffcfec91c22a7ca95fd1d5163db5" title="Get the size of a window&#39;s client area.">SDL_GetWindowSize()</a> and display mode sizes will still be in "screen coordinates" rather than pixels, but the window will have a much greater pixel density when the device supports it, and the <a class="el" href="_s_d_l__video_8h.html#ac21851bbd91760c5bab92594a58edba3" title="Get the size of a window&#39;s underlying drawable in pixels (for use with glViewport).">SDL_GL_GetDrawableSize()</a> or <a class="el" href="_s_d_l__render_8h.html#abfc0c9a50d9d1870ab7d271b7a73d8ab" title="Get the output size in pixels of a rendering context.">SDL_GetRendererOutputSize()</a> functions (depending on whether raw OpenGL or the SDL_Render API is used) can be queried to determine the size in pixels of the drawable screen framebuffer.</p>
<p>Some OpenGL ES functions such as glViewport expect sizes in pixels rather than sizes in screen coordinates. When doing 2D rendering with OpenGL ES, an orthographic projection matrix using the size in screen coordinates (<a class="el" href="_s_d_l__video_8h.html#a5cbfffcfec91c22a7ca95fd1d5163db5" title="Get the size of a window&#39;s client area.">SDL_GetWindowSize()</a>) can be used in order to display content at the same scale no matter whether a Retina device is used or not.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md63"></a>
Notes – Application events</h1>
<p>On iOS the application goes through a fixed life cycle and you will get notifications of state changes via application events. When these events are delivered you must handle them in an event callback because the OS may not give you any processing time after the events are delivered.</p>
<p>e.g. </p><pre class="fragment">int HandleAppEvents(void *userdata, SDL_Event *event)
{
    switch (event-&gt;type)
    {
    case SDL_APP_TERMINATING:
        /* Terminate the app.
           Shut everything down before returning from this function.
        */
        return 0;
    case SDL_APP_LOWMEMORY:
        /* You will get this when your app is paused and iOS wants more memory.
           Release as much memory as possible.
        */
        return 0;
    case SDL_APP_WILLENTERBACKGROUND:
        /* Prepare your app to go into the background.  Stop loops, etc.
           This gets called when the user hits the home button, or gets a call.
        */
        return 0;
    case SDL_APP_DIDENTERBACKGROUND:
        /* This will get called if the user accepted whatever sent your app to the background.
           If the user got a phone call and canceled it, you'll instead get an SDL_APP_DIDENTERFOREGROUND event and restart your loops.
           When you get this, you have 5 seconds to save all your state or the app will be terminated.
           Your app is NOT active at this point.
        */
        return 0;
    case SDL_APP_WILLENTERFOREGROUND:
        /* This call happens when your app is coming back to the foreground.
           Restore all your state here.
        */
        return 0;
    case SDL_APP_DIDENTERFOREGROUND:
        /* Restart your loops here.
           Your app is interactive and getting CPU again.
        */
        return 0;
    default:
        /* No special processing, add it to the event queue */
        return 1;
    }
}

int main(int argc, char *argv[])
{
    SDL_SetEventFilter(HandleAppEvents, NULL);

    ... run your main loop

    return 0;
}
</pre><p>============================================================================== </p>
<h1><a class="anchor" id="autotoc_md64"></a>
Notes – Accelerometer as Joystick</h1>
<p>SDL for iPhone supports polling the built in accelerometer as a joystick device. For an example on how to do this, see the accelerometer.c in the demos directory.</p>
<p>The main thing to note when using the accelerometer with SDL is that while the iPhone natively reports accelerometer as floating point values in units of g-force, <a class="el" href="_s_d_l__joystick_8h.html#ac6fbda13b93679bedfc34733d4b2e748">SDL_JoystickGetAxis()</a> reports joystick values as signed integers. Hence, in order to convert between the two, some clamping and scaling is necessary on the part of the iPhone SDL joystick driver. To convert <a class="el" href="_s_d_l__joystick_8h.html#ac6fbda13b93679bedfc34733d4b2e748">SDL_JoystickGetAxis()</a> reported values BACK to units of g-force, simply multiply the values by SDL_IPHONE_MAX_GFORCE / 0x7FFF.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md66"></a>
Notes – OpenGL ES</h1>
<p>Your SDL application for iOS uses OpenGL ES for video by default.</p>
<p>OpenGL ES for iOS supports several display pixel formats, such as RGBA8 and RGB565, which provide a 32 bit and 16 bit color buffer respectively. By default, the implementation uses RGB565, but you may use RGBA8 by setting each color component to 8 bits in <a class="el" href="_s_d_l__video_8h.html#aed4d4347f2d5def1532bc22893e0e0d9" title="Set an OpenGL window attribute before window creation.">SDL_GL_SetAttribute()</a>.</p>
<p>If your application doesn't use OpenGL's depth buffer, you may find significant performance improvement by setting SDL_GL_DEPTH_SIZE to 0.</p>
<p>Finally, if your application completely redraws the screen each frame, you may find significant performance improvement by setting the attribute SDL_GL_RETAINED_BACKING to 0.</p>
<p>OpenGL ES on iOS doesn't use the traditional system-framebuffer setup provided in other operating systems. Special care must be taken because of this:</p>
<ul>
<li>The drawable Renderbuffer must be bound to the GL_RENDERBUFFER binding point when <a class="el" href="_s_d_l__video_8h.html#a11d1245662f49f6af257627119f22835" title="Swap the OpenGL buffers for a window, if double-buffering is supported.">SDL_GL_SwapWindow()</a> is called.</li>
<li>The drawable Framebuffer Object must be bound while rendering to the screen and when <a class="el" href="_s_d_l__video_8h.html#a11d1245662f49f6af257627119f22835" title="Swap the OpenGL buffers for a window, if double-buffering is supported.">SDL_GL_SwapWindow()</a> is called.</li>
<li>If multisample antialiasing (MSAA) is used and glReadPixels is used on the screen, the drawable framebuffer must be resolved to the MSAA resolve framebuffer (via glBlitFramebuffer or glResolveMultisampleFramebufferAPPLE), and the MSAA resolve framebuffer must be bound to the GL_READ_FRAMEBUFFER binding point, before glReadPixels is called.</li>
</ul>
<p>The above objects can be obtained via <a class="el" href="_s_d_l__syswm_8h.html#ad6e40121a96c88af20d9469a04706fef" title="This function allows access to driver-dependent window information.">SDL_GetWindowWMInfo()</a> (in SDL_syswm.h).</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md68"></a>
Notes – Keyboard</h1>
<p>The SDL keyboard API has been extended to support on-screen keyboards:</p>
<p>void <a class="el" href="_s_d_l__keyboard_8h.html#ab2c8474b9a8b6d07cae4f8eceab38870" title="Start accepting Unicode text input events. This function will show the on-screen keyboard if supporte...">SDL_StartTextInput()</a> &ndash; enables text events and reveals the onscreen keyboard.</p>
<p>void <a class="el" href="_s_d_l__keyboard_8h.html#ab08b914cdfb2eaed26165cb2f6b110ec" title="Stop receiving any text input events. This function will hide the on-screen keyboard if supported.">SDL_StopTextInput()</a> &ndash; disables text events and hides the onscreen keyboard.</p>
<p>SDL_bool <a class="el" href="_s_d_l__keyboard_8h.html#a6c84ed1daac21f8224d43bcb9d5bc597" title="Return whether or not Unicode text input events are enabled.">SDL_IsTextInputActive()</a> &ndash; returns whether or not text events are enabled (and the onscreen keyboard is visible)</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md70"></a>
Notes – Reading and Writing files</h1>
<p>Each application installed on iPhone resides in a sandbox which includes its own Application Home directory. Your application may not access files outside this directory.</p>
<p>Once your application is installed its directory tree looks like: </p><pre class="fragment">MySDLApp Home/
    MySDLApp.app
    Documents/
    Library/
        Preferences/
    tmp/
</pre><p>When your SDL based iPhone application starts up, it sets the working directory to the main bundle (MySDLApp Home/MySDLApp.app), where your application resources are stored. You cannot write to this directory. Instead, I advise you to write document files to "../Documents/" and preferences to "../Library/Preferences". <br  />
</p>
<p>More information on this subject is available here: <a href="http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html">http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html</a></p>
<hr  />
 <h1><a class="anchor" id="autotoc_md72"></a>
Notes – iPhone SDL limitations</h1>
<p>Windows: Full-size, single window applications only. You cannot create multi-window SDL applications for iPhone OS. The application window will fill the display, though you have the option of turning on or off the menu-bar (pass <a class="el" href="_s_d_l__video_8h.html#a42565088bdb739a5353fd67abbe235d2" title="Create a window with the specified position, dimensions, and flags.">SDL_CreateWindow()</a> the flag SDL_WINDOW_BORDERLESS).</p>
<p>Textures: The optimal texture formats on iOS are SDL_PIXELFORMAT_ABGR8888, SDL_PIXELFORMAT_ABGR8888, SDL_PIXELFORMAT_BGR888, and SDL_PIXELFORMAT_RGB24 pixel formats.</p>
<p>Loading Shared Objects: This is disabled by default since it seems to break the terms of the iOS SDK agreement for iOS versions prior to iOS 8. It can be re-enabled in SDL_config_iphoneos.h.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md74"></a>
Game Center</h1>
<p>Game Center integration might require that you break up your main loop in order to yield control back to the system. In other words, instead of running an endless main loop, you run each frame in a callback function, using: </p><pre class="fragment">int SDL_iPhoneSetAnimationCallback(SDL_Window * window, int interval, void (*callback)(void*), void *callbackParam);
</pre><p>This will set up the given function to be called back on the animation callback, and then you have to return from <a class="el" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> to let the Cocoa event loop run.</p>
<p>e.g. </p><pre class="fragment">extern "C"
void ShowFrame(void*)
{
    ... do event handling, frame logic and rendering ...
}

int main(int argc, char *argv[])
{
    ... initialize game ...

#if __IPHONEOS__
    // Initialize the Game Center for scoring and matchmaking
    InitGameCenter();

    // Set up the game to run in the window animation callback on iOS
    // so that Game Center and so forth works correctly.
    SDL_iPhoneSetAnimationCallback(window, 1, ShowFrame, NULL);
#else
    while ( running ) {
        ShowFrame(0);
        DelayFrame();
    }
#endif
    return 0;
}
</pre><p>============================================================================== </p>
<h1><a class="anchor" id="autotoc_md75"></a>
Deploying to older versions of iOS</h1>
<p>SDL supports deploying to older versions of iOS than are supported by the latest version of Xcode, all the way back to iOS 6.1</p>
<p>In order to do that you need to download an older version of Xcode: <a href="https://developer.apple.com/download/more/?name=Xcode">https://developer.apple.com/download/more/?name=Xcode</a></p>
<p>Open the package contents of the older Xcode and your newer version of Xcode and copy over the folders in Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport</p>
<p>Then open the file Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/SDKSettings.plist and add the versions of iOS you want to deploy to the key Root/DefaultProperties/DEPLOYMENT_TARGET_SUGGESTED_VALUES</p>
<p>Open your project and set your deployment target to the desired version of iOS</p>
<p>Finally, remove GameController from the list of frameworks linked by your application and edit the build settings for "Other Linker Flags" and add -weak_framework GameController</p>
<p>By default SDL will only link against glibc, the rest of the features will be enabled dynamically at runtime depending on the available features on the target system. So, for example if you built SDL with Xinerama support and the target system does not have the Xinerama libraries installed, it will be disabled at runtime, and you won't get a missing library error, at least with the default configuration parameters.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md77"></a>
Build Dependencies</h1>
<p>Ubuntu 13.04, all available features enabled:</p>
<p>sudo apt-get install build-essential mercurial make cmake autoconf automake \ libtool libasound2-dev libpulse-dev libaudio-dev libx11-dev libxext-dev \ libxrandr-dev libxcursor-dev libxi-dev libxinerama-dev libxxf86vm-dev \ libxss-dev libgl1-mesa-dev libesd0-dev libdbus-1-dev libudev-dev \ libgles1-mesa-dev libgles2-mesa-dev libegl1-mesa-dev libibus-1.0-dev \ fcitx-libs-dev libsamplerate0-dev libsndio-dev</p>
<p>Ubuntu 16.04+ can also add "libwayland-dev libxkbcommon-dev wayland-protocols" to that command line for Wayland support.</p>
<p>NOTES:</p><ul>
<li>This includes all the audio targets except arts, because Ubuntu pulled the artsc0-dev package, but in theory SDL still supports it.</li>
<li>libsamplerate0-dev lets SDL optionally link to libresamplerate at runtime for higher-quality audio resampling. SDL will work without it if the library is missing, so it's safe to build in support even if the end user doesn't have this library installed.</li>
<li>DirectFB isn't included because the configure script (currently) fails to find it at all. You can do "sudo apt-get install libdirectfb-dev" and fix the configure script to include DirectFB support. Send patches. :)</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md79"></a>
Joystick does not work</h1>
<p>If you compiled or are using a version of SDL with udev support (and you should!) there's a few issues that may cause SDL to fail to detect your joystick. To debug this, start by installing the evtest utility. On Ubuntu/Debian: </p><pre class="fragment">sudo apt-get install evtest
</pre><p>Then run: </p><pre class="fragment">sudo evtest
</pre><p>You'll hopefully see your joystick listed along with a name like "/dev/input/eventXX" Now run: </p><pre class="fragment">cat /dev/input/event/XX
</pre><p>If you get a permission error, you need to set a udev rule to change the mode of your device (see below) <br  />
</p>
<p>Also, try: </p><pre class="fragment">sudo udevadm info --query=all --name=input/eventXX
</pre><p>If you see a line stating ID_INPUT_JOYSTICK=1, great, if you don't see it, you need to set up an udev rule to force this variable.</p>
<p>A combined rule for the Saitek Pro Flight Rudder Pedals to fix both issues looks like:</p>
<p>SUBSYSTEM=="input", ATTRS{idProduct}=="0763", ATTRS{idVendor}=="06a3", MODE="0666", ENV{ID_INPUT_JOYSTICK}="1" SUBSYSTEM=="input", ATTRS{idProduct}=="0764", ATTRS{idVendor}=="06a3", MODE="0666", ENV{ID_INPUT_JOYSTICK}="1"</p>
<p>You can set up similar rules for your device by changing the values listed in idProduct and idVendor. To obtain these values, try: </p><pre class="fragment">sudo udevadm info -a --name=input/eventXX | grep idVendor
sudo udevadm info -a --name=input/eventXX | grep idProduct
</pre><p>If multiple values come up for each of these, the one you want is the first one of each. <br  />
</p>
<p>On other systems which ship with an older udev (such as CentOS), you may need to set up a rule such as: </p><pre class="fragment">SUBSYSTEM=="input", ENV{ID_CLASS}=="joystick", ENV{ID_INPUT_JOYSTICK}="1"
</pre><p>These instructions are for people using Apple's Mac OS X (pronounced "ten").</p>
<p>From the developer's point of view, OS X is a sort of hybrid Mac and Unix system, and you have the option of using either traditional command line tools or Apple's IDE Xcode.</p>
<h1><a class="anchor" id="autotoc_md80"></a>
Command Line Build</h1>
<p>To build SDL using the command line, use the standard configure and make process: </p><pre class="fragment">./configure
make
sudo make install
</pre><p>You can also build SDL as a Universal library (a single binary for both 32-bit and 64-bit Intel architectures), on Mac OS X 10.7 and newer, by using the gcc-fat.sh script in build-scripts: </p><pre class="fragment">mkdir mybuild
cd mybuild
CC=$PWD/../build-scripts/gcc-fat.sh CXX=$PWD/../build-scripts/g++-fat.sh ../configure
make
sudo make install
</pre><p>This script builds SDL with 10.5 ABI compatibility on i386 and 10.6 ABI compatibility on x86_64 architectures. For best compatibility you should compile your application the same way.</p>
<p>Please note that building SDL requires at least Xcode 4.6 and the 10.7 SDK (even if you target back to 10.5 systems). PowerPC support for Mac OS X has been officially dropped as of SDL 2.0.2.</p>
<p>To use the library once it's built, you essential have two possibilities: use the traditional autoconf/automake/make method, or use Xcode.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md82"></a>
Caveats for using SDL with Mac OS X</h1>
<p>Some things you have to be aware of when using SDL on Mac OS X:</p>
<ul>
<li>If you register your own NSApplicationDelegate (using [NSApp setDelegate:]), SDL will not register its own. This means that SDL will not terminate using SDL_Quit if it receives a termination request, it will terminate like a normal app, and it will not send a SDL_DROPFILE when you request to open a file with the app. To solve these issues, put the following code in your NSApplicationDelegate implementation:</li>
</ul>
<pre class="fragment">- (NSApplicationTerminateReply)applicationShouldTerminate:(NSApplication *)sender
{
    if (SDL_GetEventState(SDL_QUIT) == SDL_ENABLE) {
        SDL_Event event;
        event.type = SDL_QUIT;
        SDL_PushEvent(&amp;event);
    }

    return NSTerminateCancel;
}

- (BOOL)application:(NSApplication *)theApplication openFile:(NSString *)filename
{
    if (SDL_GetEventState(SDL_DROPFILE) == SDL_ENABLE) {
        SDL_Event event;
        event.type = SDL_DROPFILE;
        event.drop.file = SDL_strdup([filename UTF8String]);
        return (SDL_PushEvent(&amp;event) &gt; 0);
    }

    return NO;
}
</pre><p>============================================================================== </p>
<h1><a class="anchor" id="autotoc_md83"></a>
Using the Simple DirectMedia Layer with a traditional Makefile</h1>
<p>An existing autoconf/automake build system for your SDL app has good chances to work almost unchanged on OS X. However, to produce a "real" Mac OS X binary that you can distribute to users, you need to put the generated binary into a so called "bundle", which basically is a fancy folder with a name like "MyCoolGame.app".</p>
<p>To get this build automatically, add something like the following rule to your Makefile.am: </p><pre class="fragment">bundle_contents = APP_NAME.app/Contents
APP_NAME_bundle: EXE_NAME
    mkdir -p $(bundle_contents)/MacOS
    mkdir -p $(bundle_contents)/Resources
    echo "APPL????" &gt; $(bundle_contents)/PkgInfo
    $(INSTALL_PROGRAM) $&lt; $(bundle_contents)/MacOS/
</pre><p>You should replace EXE_NAME with the name of the executable. APP_NAME is what will be visible to the user in the Finder. Usually it will be the same as EXE_NAME but capitalized. E.g. if EXE_NAME is "testgame" then APP_NAME usually is "TestGame". You might also want to use <code>@PACKAGE@</code> to use the package name as specified in your configure.ac file.</p>
<p>If your project builds more than one application, you will have to do a bit more. For each of your target applications, you need a separate rule.</p>
<p>If you want the created bundles to be installed, you may want to add this rule to your Makefile.am: </p><pre class="fragment">install-exec-hook: APP_NAME_bundle
    rm -rf $(DESTDIR)$(prefix)/Applications/APP_NAME.app
    mkdir -p $(DESTDIR)$(prefix)/Applications/
    cp -r $&lt; /$(DESTDIR)$(prefix)Applications/
</pre><p>This rule takes the Bundle created by the rule from step 3 and installs them into "$(DESTDIR)$(prefix)/Applications/".</p>
<p>Again, if you want to install multiple applications, you will have to augment the make rule accordingly.</p>
<p>But beware! That is only part of the story! With the above, you end up with a bare bone .app bundle, which is double clickable from the Finder. But there are some more things you should do before shipping your product...</p>
<p>1) The bundle right now probably is dynamically linked against SDL. That means that when you copy it to another computer, <em>it will not run</em>, unless you also install SDL on that other computer. A good solution for this dilemma is to static link against SDL. On OS X, you can achieve that by linking against the libraries listed by </p><pre class="fragment">sdl-config --static-libs
</pre><p>instead of those listed by </p><pre class="fragment">sdl-config --libs
</pre><p>Depending on how exactly SDL is integrated into your build systems, the way to achieve that varies, so I won't describe it here in detail</p>
<p>2) Add an 'Info.plist' to your application. That is a special XML file which contains some meta-information about your application (like some copyright information, the version of your app, the name of an optional icon file, and other things). Part of that information is displayed by the Finder when you click on the .app, or if you look at the "Get Info" window. More information about Info.plist files can be found on Apple's homepage.</p>
<p>As a final remark, let me add that I use some of the techniques (and some variations of them) in Exult and ScummVM; both are available in source on the net, so feel free to take a peek at them for inspiration!</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md85"></a>
Using the Simple DirectMedia Layer with Xcode</h1>
<p>These instructions are for using Apple's Xcode IDE to build SDL applications.</p>
<ul>
<li>First steps</li>
</ul>
<p>The first thing to do is to unpack the Xcode.tar.gz archive in the top level SDL directory (where the Xcode.tar.gz archive resides). Because Stuffit Expander will unpack the archive into a subdirectory, you should unpack the archive manually from the command line: </p><pre class="fragment">cd [path_to_SDL_source]
tar zxf Xcode.tar.gz
</pre><p>This will create a new folder called Xcode, which you can browse normally from the Finder.</p>
<ul>
<li>Building the Framework</li>
</ul>
<p>The SDL Library is packaged as a framework bundle, an organized relocatable folder hierarchy of executable code, interface headers, and additional resources. For practical purposes, you can think of a framework as a more user and system-friendly shared library, whose library file behaves more or less like a standard UNIX shared library.</p>
<p>To build the framework, simply open the framework project and build it. By default, the framework bundle "SDL.framework" is installed in /Library/Frameworks. Therefore, the testers and project stationary expect it to be located there. However, it will function the same in any of the following locations: </p><pre class="fragment">~/Library/Frameworks
/Local/Library/Frameworks
/System/Library/Frameworks
</pre><ul>
<li>Build Options There are two "Build Styles" (See the "Targets" tab) for SDL. "Deployment" should be used if you aren't tweaking the SDL library. "Development" should be used to debug SDL apps or the library itself.</li>
<li>Building the Testers Open the SDLTest project and build away!</li>
<li>Using the Project Stationary Copy the stationary to the indicated folders to access it from the "New Project" and "Add target" menus. What could be easier?</li>
<li>Setting up a new project by hand Some of you won't want to use the Stationary so I'll give some tips:<ul>
<li>Create a new "Cocoa Application"</li>
<li>Add src/main/macosx/SDLMain.m , .h and .nib to your project</li>
<li>Remove "main.c" from your project</li>
<li>Remove "MainMenu.nib" from your project</li>
<li>Add "$(HOME)/Library/Frameworks/SDL.framework/Headers" to include path</li>
<li>Add "$(HOME)/Library/Frameworks" to the frameworks search path</li>
<li>Add "-framework SDL -framework Foundation -framework AppKit" to "OTHER_LDFLAGS"</li>
<li>Set the "Main Nib File" under "Application Settings" to "SDLMain.nib"</li>
<li>Add your files</li>
<li>Clean and build</li>
</ul>
</li>
<li>Building from command line Use pbxbuild in the same directory as your .pbproj file</li>
<li>Running your app You can send command line args to your app by either invoking it from the command line (in *.app/Contents/MacOS) or by entering them in the "Executables" panel of the target settings.</li>
<li>Implementation Notes Some things that may be of interest about how it all works...<ul>
<li>Working directory As defined in the SDL_main.m file, the working directory of your SDL app is by default set to its parent. You may wish to change this to better suit your needs.</li>
<li>You have a Cocoa App! Your SDL app is essentially a Cocoa application. When your app starts up and the libraries finish loading, a Cocoa procedure is called, which sets up the working directory and calls your <a class="el" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> method. You are free to modify your Cocoa app with generally no consequence to SDL. You cannot, however, easily change the SDL window itself. Functionality may be added in the future to help this.</li>
</ul>
</li>
</ul>
<p>Known bugs are listed in the file "BUGS.txt".</p>
<p>Requirements:</p>
<ul>
<li>Native Client SDK (<a href="https://developer.chrome.com/native-client">https://developer.chrome.com/native-client</a>), (tested with Pepper version 33 or higher).</li>
</ul>
<p>The SDL backend for Chrome's Native Client has been tested only with the PNaCl toolchain, which generates binaries designed to run on ARM and x86_32/64 platforms. This does not mean it won't work with the other toolchains!</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md87"></a>
Building SDL for NaCl</h1>
<p>Set up the right environment variables (see naclbuild.sh), then configure SDL with: </p><pre class="fragment">configure --host=pnacl --prefix some/install/destination
</pre><p>Then "make".</p>
<p>As an example of how to create a deployable app a Makefile project is provided in test/nacl/Makefile, which includes some monkey patching of the common.mk file provided by NaCl, without which linking properly to SDL won't work (the search path can't be modified externally, so the linker won't find SDL's binaries unless you dump them into the SDK path, which is inconvenient). Also provided in test/nacl is the required support file, such as index.html, manifest.json, etc. SDL apps for NaCl run on a worker thread using the ppapi_simple infrastructure. This allows for blocking calls on all the relevant systems (OpenGL ES, filesystem), hiding the asynchronous nature of the browser behind the scenes...which is not the same as making it disappear!</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md89"></a>
Running tests</h1>
<p>Due to the nature of NaCl programs, building and running SDL tests is not as straightforward as one would hope. The script naclbuild.sh in build-scripts automates the process and should serve as a guide for users of SDL trying to build their own applications.</p>
<p>Basic usage: </p><pre class="fragment">./naclbuild.sh path/to/pepper/toolchain (i.e. ~/naclsdk/pepper_35)
</pre><p>This will build testgles2.c by default.</p>
<p>If you want to build a different test, for example testrendercopyex.c: </p><pre class="fragment">SOURCES=~/sdl/SDL/test/testrendercopyex.c ./naclbuild.sh ~/naclsdk/pepper_35
</pre><p>Once the build finishes, you have to serve the contents with a web server (the script will give you instructions on how to do that with Python).</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md91"></a>
RWops and nacl_io</h1>
<p><a class="el" href="struct_s_d_l___r_wops.html">SDL_RWops</a> work transparently with nacl_io. Two functions control the mount points: </p><pre class="fragment">int mount(const char* source, const char* target, 
                  const char* filesystemtype, 
                  unsigned long mountflags, const void *data);
int umount(const char *target);

For convenience, SDL will by default mount an httpfs tree at / before calling 
</pre><p> the app's main function. Such setting can be overridden by calling: </p><pre class="fragment">umount("/");
</pre><p>And then mounting a different filesystem at /</p>
<p>It's important to consider that the asynchronous nature of file operations on a browser is hidden from the application, effectively providing the developer with a set of blocking file operations just like you get in a regular desktop environment, which eases the job of porting to Native Client, but also introduces a set of challenges of its own, in particular when big file sizes and slow connections are involved.</p>
<p>For more information on how nacl_io and mount points work, see: </p><pre class="fragment">https://developer.chrome.com/native-client/devguide/coding/nacl_io
https://src.chromium.org/chrome/trunk/src/native_client_sdk/src/libraries/nacl_io/nacl_io.h
</pre><p>To be able to save into the directory "/save/" (like backup of game) : </p><pre class="fragment">mount("", "/save", "html5fs", 0, "type=PERSISTENT");
</pre><p>And add to manifest.json : </p><pre class="fragment">"permissions": [
    "unlimitedStorage"
]
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md92"></a>
TODO - Known Issues</h1>
<ul>
<li>Testing of all systems with a real application (something other than SDL's tests)</li>
<li>Key events don't seem to work properly</li>
</ul>
<p>( <a href="http://openpandora.org/">http://openpandora.org/</a> )</p><ul>
<li>A pandora specific video driver was written to allow SDL 2.0 with OpenGL ES support to work on the pandora under the framebuffer. This driver do not have input support for now, so if you use it you will have to add your own control code. The video driver name is "pandora" so if you have problem running it from the framebuffer, try to set the following variable before starting your application : "export SDL_VIDEODRIVER=pandora"</li>
<li>OpenGL ES support was added to the x11 driver, so it's working like the normal x11 driver one with OpenGLX support, with SDL input event's etc..</li>
</ul>
<p>David Carré (Cpasjuste) <a href="#" onclick="location.href='mai'+'lto:'+'cpa'+'sj'+'ust'+'e@'+'gma'+'il'+'.co'+'m'; return false;">cpasj<span style="display: none;">.nosp@m.</span>uste<span style="display: none;">.nosp@m.</span>@gmai<span style="display: none;">.nosp@m.</span>l.co<span style="display: none;">.nosp@m.</span>m</a></p>
<p>We maintain the list of supported platforms on our wiki now, and how to build and install SDL for those platforms: </p><pre class="fragment">https://wiki.libsdl.org/Installation
</pre><ul>
<li><p class="startli">Porting To A New Platform</p>
<p class="startli">The first thing you have to do when porting to a new platform, is look at include/SDL_platform.h and create an entry there for your operating system. The standard format is "__PLATFORM__", where PLATFORM is the name of the OS. Ideally SDL_platform.h will be able to auto-detect the system it's building on based on C preprocessor symbols.</p>
</li>
</ul>
<p>There are two basic ways of building SDL at the moment:</p>
<ol type="1">
<li><p class="startli">The "UNIX" way: ./configure; make; make install</p>
<p class="startli">If you have a GNUish system, then you might try this. Edit configure.ac, take a look at the large section labelled:</p>
<p class="startli">"Set up the configuration based on the host platform!"</p>
<p class="startli">Add a section for your platform, and then re-run autogen.sh and build!</p>
</li>
<li><p class="startli">Using an IDE:</p>
<p class="startli">If you're using an IDE or other non-configure build system, you'll probably want to create a custom SDL_config.h for your platform. Edit SDL_config.h, add a section for your platform, and create a custom SDL_config_{platform}.h, based on SDL_config_minimal.h and SDL_config.h.in</p>
<p class="startli">Add the top level include directory to the header search path, and then add the following sources to the project:</p>
<p class="startli">src/*.c src/atomic/*.c src/audio/*.c src/cpuinfo/*.c src/events/*.c src/file/*.c src/haptic/*.c src/joystick/*.c src/power/*.c src/render/*.c src/render/software/*.c src/stdlib/*.c src/thread/*.c src/timer/*.c src/video/*.c src/audio/disk/*.c src/audio/dummy/*.c src/filesystem/dummy/*.c src/video/dummy/*.c src/haptic/dummy/*.c src/joystick/dummy/*.c src/main/dummy/*.c src/thread/generic/*.c src/timer/dummy/*.c src/loadso/dummy/*.c</p>
</li>
</ol>
<p>Once you have a working library without any drivers, you can go back to each of the major subsystems and start implementing drivers for your platform.</p>
<p>If you have any questions, don't hesitate to ask on the SDL mailing list: <a href="http://www.libsdl.org/mailing-list.php">http://www.libsdl.org/mailing-list.php</a></p>
<p>Enjoy! Sam Lantinga (<a href="#" onclick="location.href='mai'+'lto:'+'slo'+'uk'+'en@'+'li'+'bsd'+'l.'+'org'; return false;">slouk<span style="display: none;">.nosp@m.</span>en@l<span style="display: none;">.nosp@m.</span>ibsdl<span style="display: none;">.nosp@m.</span>.org</a>)</p>
<p>SDL port for the Sony PSP contributed by Captian Lex</p>
<p>Credit to Marcus R.Brown,Jim Paris,Matthew H for the original SDL 1.2 for PSP Geecko for his PSP GU lib "Glib2d"</p>
<h1><a class="anchor" id="autotoc_md93"></a>
Building</h1>
<p>To build for the PSP, make sure psp-config is in the path and run: make -f Makefile.psp</p>
<h1><a class="anchor" id="autotoc_md94"></a>
To Do</h1>
<p>PSP Screen Keyboard</p>
<p>Requirements:</p>
<p>Raspbian (other Linux distros may work as well).</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md96"></a>
Features</h1>
<ul>
<li>Works without X11</li>
<li>Hardware accelerated OpenGL ES 2.x</li>
<li>Sound via ALSA</li>
<li>Input (mouse/keyboard/joystick) via EVDEV</li>
<li>Hotplugging of input devices via UDEV</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md98"></a>
Raspbian Build Dependencies</h1>
<p>sudo apt-get install libudev-dev libasound2-dev libdbus-1-dev</p>
<p>You also need the VideoCore binary stuff that ships in /opt/vc for EGL and OpenGL ES 2.x, it usually comes pre-installed, but in any case:</p>
<p>sudo apt-get install libraspberrypi0 libraspberrypi-bin libraspberrypi-dev</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md100"></a>
NEON</h1>
<p>If your Pi has NEON support, make sure you add -mfpu=neon to your CFLAGS so that SDL will select some otherwise-disabled highly-optimized code. The original Pi units don't have NEON, the Pi2 probably does, and the Pi3 definitely does.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md102"></a>
Cross compiling from x86 Linux</h1>
<p>To cross compile SDL for Raspbian from your desktop machine, you'll need a Raspbian system root and the cross compilation tools. We'll assume these tools will be placed in /opt/rpi-tools </p><pre class="fragment">sudo git clone --depth 1 https://github.com/raspberrypi/tools /opt/rpi-tools
</pre><p>You'll also need a Raspbian binary image. Get it from: <a href="http://downloads.raspberrypi.org/raspbian_latest">http://downloads.raspberrypi.org/raspbian_latest</a> After unzipping, you'll get file with a name like: "&lt;date&gt;-wheezy-raspbian.img" Let's assume the sysroot will be built in /opt/rpi-sysroot. </p><pre class="fragment">export SYSROOT=/opt/rpi-sysroot
sudo kpartx -a -v &lt;path_to_raspbian_image&gt;.img
sudo mount -o loop /dev/mapper/loop0p2 /mnt
sudo cp -r /mnt $SYSROOT
sudo apt-get install qemu binfmt-support qemu-user-static
sudo cp /usr/bin/qemu-arm-static $SYSROOT/usr/bin
sudo mount --bind /dev $SYSROOT/dev
sudo mount --bind /proc $SYSROOT/proc
sudo mount --bind /sys $SYSROOT/sys
</pre><p>Now, before chrooting into the ARM sysroot, you'll need to apply a workaround, edit $SYSROOT/etc/ld.so.preload and comment out all lines in it. </p><pre class="fragment">sudo chroot $SYSROOT
apt-get install libudev-dev libasound2-dev libdbus-1-dev libraspberrypi0 libraspberrypi-bin libraspberrypi-dev libx11-dev libxext-dev libxrandr-dev libxcursor-dev libxi-dev libxinerama-dev libxxf86vm-dev libxss-dev
exit
sudo umount $SYSROOT/dev
sudo umount $SYSROOT/proc
sudo umount $SYSROOT/sys
sudo umount /mnt
</pre><p>There's one more fix required, as the libdl.so symlink uses an absolute path which doesn't quite work in our setup. </p><pre class="fragment">sudo rm -rf $SYSROOT/usr/lib/arm-linux-gnueabihf/libdl.so
sudo ln -s ../../../lib/arm-linux-gnueabihf/libdl.so.2 $SYSROOT/usr/lib/arm-linux-gnueabihf/libdl.so
</pre><p>The final step is compiling SDL itself. </p><pre class="fragment">export CC="/opt/rpi-tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin/arm-linux-gnueabihf-gcc --sysroot=$SYSROOT -I$SYSROOT/opt/vc/include -I$SYSROOT/usr/include -I$SYSROOT/opt/vc/include/interface/vcos/pthreads -I$SYSROOT/opt/vc/include/interface/vmcs_host/linux"
cd &lt;SDL SOURCE&gt;
mkdir -p build;cd build
LDFLAGS="-L$SYSROOT/opt/vc/lib" ../configure --with-sysroot=$SYSROOT --host=arm-raspberry-linux-gnueabihf --prefix=$PWD/rpi-sdl2-installed --disable-pulseaudio --disable-esd
make
make install
</pre><p>To be able to deploy this to /usr/local in the Raspbian system you need to fix up a few paths: </p><pre class="fragment">perl -w -pi -e "s#$PWD/rpi-sdl2-installed#/usr/local#g;" ./rpi-sdl2-installed/lib/libSDL2.la ./rpi-sdl2-installed/lib/pkgconfig/sdl2.pc ./rpi-sdl2-installed/bin/sdl2-config
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md103"></a>
Apps don't work or poor video/audio performance</h1>
<p>If you get sound problems, buffer underruns, etc, run "sudo rpi-update" to update the RPi's firmware. Note that doing so will fix these problems, but it will also render the CMA - Dynamic Memory Split functionality useless.</p>
<p>Also, by default the Raspbian distro configures the GPU RAM at 64MB, this is too low in general, specially if a 1080p TV is hooked up.</p>
<p>See here how to configure this setting: <a href="http://elinux.org/RPiconfig">http://elinux.org/RPiconfig</a></p>
<p>Using a fixed gpu_mem=128 is the best option (specially if you updated the firmware, using CMA probably won't work, at least it's the current case).</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md105"></a>
No input</h1>
<p>Make sure you belong to the "input" group. </p><pre class="fragment">sudo usermod -aG input `whoami`
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md106"></a>
No HDMI Audio</h1>
<p>If you notice that ALSA works but there's no audio over HDMI, try adding: </p><pre class="fragment">hdmi_drive=2
</pre><p>to your config.txt file and reboot.</p>
<p>Reference: <a href="http://www.raspberrypi.org/phpBB3/viewtopic.php?t=5062">http://www.raspberrypi.org/phpBB3/viewtopic.php?t=5062</a></p>
<hr  />
 <h1><a class="anchor" id="autotoc_md108"></a>
Text Input API support</h1>
<p>The Text Input API is supported, with translation of scan codes done via the kernel symbol tables. For this to work, SDL needs access to a valid console. If you notice there's no SDL_TEXTINPUT message being emitted, double check that your app has read access to one of the following:</p>
<ul>
<li>/proc/self/fd/0</li>
<li>/dev/tty</li>
<li>/dev/tty[0...6]</li>
<li>/dev/vc/0</li>
<li>/dev/console</li>
</ul>
<p>This is usually not a problem if you run from the physical terminal (as opposed to running from a pseudo terminal, such as via SSH). If running from a PTS, a quick workaround is to run your app as root or add yourself to the tty group, then re-login to the system. </p><pre class="fragment">sudo usermod -aG tty `whoami`
</pre><p>The keyboard layout used by SDL is the same as the one the kernel uses. To configure the layout on Raspbian: </p><pre class="fragment">sudo dpkg-reconfigure keyboard-configuration
</pre><p>To configure the locale, which controls which keys are interpreted as letters, this determining the CAPS LOCK behavior: </p><pre class="fragment">sudo dpkg-reconfigure locales
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md109"></a>
OpenGL problems</h1>
<p>If you have desktop OpenGL headers installed at build time in your RPi or cross compilation environment, support for it will be built in. However, the chipset does not actually have support for it, which causes issues in certain SDL apps since the presence of OpenGL support supersedes the ES/ES2 variants. The workaround is to disable OpenGL at configuration time: </p><pre class="fragment">./configure --disable-video-opengl
</pre><p>Or if the application uses the Render functions, you can use the SDL_RENDER_DRIVER environment variable: </p><pre class="fragment">export SDL_RENDER_DRIVER=opengles2
</pre><p>================================================================================ </p>
<h1><a class="anchor" id="autotoc_md110"></a>
Notes</h1>
<ul>
<li>When launching apps remotely (via SSH), SDL can prevent local keystrokes from leaking into the console only if it has root privileges. Launching apps locally does not suffer from this issue.</li>
</ul>
<h1><a class="anchor" id="autotoc_md111"></a>
System Specific Notes</h1>
<p>Linux: The linux touch system is currently based off event streams, and proc/bus/devices. The active user must be given permissions to read /dev/input/TOUCHDEVICE, where TOUCHDEVICE is the event stream for your device. Currently only Wacom tablets are supported. If you have an unsupported tablet contact me at <a href="#" onclick="location.href='mai'+'lto:'+'jim'+'.t'+'la+'+'sd'+'l_t'+'ou'+'ch@'+'gm'+'ail'+'.c'+'om'; return false;">jim.t<span style="display: none;">.nosp@m.</span>la+s<span style="display: none;">.nosp@m.</span>dl_to<span style="display: none;">.nosp@m.</span>uch@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a> and I will help you get support for it.</p>
<p>Mac: The Mac and iPhone APIs are pretty. If your touch device supports them then you'll be fine. If it doesn't, then there isn't much we can do.</p>
<p>iPhone: Works out of box.</p>
<p>Windows: Unfortunately there is no windows support as of yet. Support for Windows 7 is planned, but we currently have no way to test. If you have a Windows 7 WM_TOUCH supported device, and are willing to help test please contact me at <a href="#" onclick="location.href='mai'+'lto:'+'jim'+'.t'+'la+'+'sd'+'l_t'+'ou'+'ch@'+'gm'+'ail'+'.c'+'om'; return false;">jim.t<span style="display: none;">.nosp@m.</span>la+s<span style="display: none;">.nosp@m.</span>dl_to<span style="display: none;">.nosp@m.</span>uch@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a></p>
<hr  />
 <h1><a class="anchor" id="autotoc_md113"></a>
Events</h1>
<p>SDL_FINGERDOWN: Sent when a finger (or stylus) is placed on a touch device. Fields:</p><ul>
<li>event.tfinger.touchId - the Id of the touch device.</li>
<li>event.tfinger.fingerId - the Id of the finger which just went down.</li>
<li>event.tfinger.x - the x coordinate of the touch (0..1)</li>
<li>event.tfinger.y - the y coordinate of the touch (0..1)</li>
<li>event.tfinger.pressure - the pressure of the touch (0..1)</li>
</ul>
<p>SDL_FINGERMOTION: Sent when a finger (or stylus) is moved on the touch device. Fields: Same as SDL_FINGERDOWN but with additional:</p><ul>
<li>event.tfinger.dx - change in x coordinate during this motion event.</li>
<li>event.tfinger.dy - change in y coordinate during this motion event.</li>
</ul>
<p>SDL_FINGERUP: Sent when a finger (or stylus) is lifted from the touch device. Fields: Same as SDL_FINGERDOWN.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md115"></a>
Functions</h1>
<p>SDL provides the ability to access the underlying <a class="el" href="struct_s_d_l___finger.html">SDL_Finger</a> structures. These structures should <em>never</em> be modified.</p>
<p>The following functions are included from SDL_touch.h</p>
<p>To get a SDL_TouchID call <a class="el" href="_s_d_l__touch_8h.html#af23f09dc79eace93cdc8dd770eed0d0a" title="Get the touch ID with the given index, or 0 if the index is invalid.">SDL_GetTouchDevice(int index)</a>. This returns a SDL_TouchID. IMPORTANT: If the touch has been removed, or there is no touch with the given index, <a class="el" href="_s_d_l__touch_8h.html#af23f09dc79eace93cdc8dd770eed0d0a" title="Get the touch ID with the given index, or 0 if the index is invalid.">SDL_GetTouchDevice()</a> will return 0. Be sure to check for this!</p>
<p>The number of touch devices can be queried with <a class="el" href="_s_d_l__touch_8h.html#a14a41a2964ddf868a180e42ccfd441d1" title="Get the number of registered touch devices.">SDL_GetNumTouchDevices()</a>.</p>
<p>A SDL_TouchID may be used to get pointers to <a class="el" href="struct_s_d_l___finger.html">SDL_Finger</a>.</p>
<p>SDL_GetNumTouchFingers(touchID) may be used to get the number of fingers currently down on the device.</p>
<p>The most common reason to access <a class="el" href="struct_s_d_l___finger.html">SDL_Finger</a> is to query the fingers outside the event. In most cases accessing the fingers is using the event. This would be accomplished by code like the following: </p><pre class="fragment">  float x = event.tfinger.x;
  float y = event.tfinger.y;
</pre><p>To get a <a class="el" href="struct_s_d_l___finger.html">SDL_Finger</a>, call <a class="el" href="_s_d_l__touch_8h.html#a50902a3c1e4dba0b82cb73cb786dae41" title="Get the finger object of the given touch, with the given index.">SDL_GetTouchFinger(SDL_TouchID touchID, int index)</a>, where touchID is a SDL_TouchID, and index is the requested finger. This returns a <a class="el" href="struct_s_d_l___finger.html">SDL_Finger</a> *, or NULL if the finger does not exist, or has been removed. A <a class="el" href="struct_s_d_l___finger.html">SDL_Finger</a> is guaranteed to be persistent for the duration of a touch, but it will be de-allocated as soon as the finger is removed. This occurs when the SDL_FINGERUP event is <em>added</em> to the event queue, and thus <em>before</em> the SDL_FINGERUP event is polled. As a result, be very careful to check for NULL return values.</p>
<p>A <a class="el" href="struct_s_d_l___finger.html">SDL_Finger</a> has the following fields:</p><ul>
<li>x, y: The current coordinates of the touch.</li>
<li>pressure: The pressure of the touch.</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md117"></a>
Notes</h1>
<p>For a complete example see test/testgesture.c</p>
<p>Please direct questions/comments to: <a href="#" onclick="location.href='mai'+'lto:'+'jim'+'.t'+'la+'+'sd'+'l_t'+'ou'+'ch@'+'gm'+'ail'+'.c'+'om'; return false;">jim.t<span style="display: none;">.nosp@m.</span>la+s<span style="display: none;">.nosp@m.</span>dl_to<span style="display: none;">.nosp@m.</span>uch@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a> (original author, API was changed since)</p>
<p>Windows CE is no longer supported by SDL.</p>
<p>We have left the CE support in SDL 1.2 for those that must have it, and we have support for Windows Phone 8 and WinRT in SDL2, as of SDL 2.0.3.</p>
<p>&ndash;ryan.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md119"></a>
OpenGL ES 2.x support</h1>
<p>SDL has support for OpenGL ES 2.x under Windows via two alternative implementations. The most straightforward method consists in running your app in a system with a graphic card paired with a relatively recent (as of November of 2013) driver which supports the WGL_EXT_create_context_es2_profile extension. Vendors known to ship said extension on Windows currently include nVidia and Intel.</p>
<p>The other method involves using the ANGLE library (<a href="https://code.google.com/p/angleproject/">https://code.google.com/p/angleproject/</a>) If an OpenGL ES 2.x context is requested and no WGL_EXT_create_context_es2_profile extension is found, SDL will try to load the libEGL.dll library provided by ANGLE. To obtain the ANGLE binaries, you can either compile from source from <a href="https://chromium.googlesource.com/angle/angle">https://chromium.googlesource.com/angle/angle</a> or copy the relevant binaries from a recent Chrome/Chromium install for Windows. The files you need are: </p><pre class="fragment">* libEGL.dll
* libGLESv2.dll
* d3dcompiler_46.dll (supports Windows Vista or later, better shader compiler)
or...
* d3dcompiler_43.dll (supports Windows XP or later)
</pre><p>If you compile ANGLE from source, you can configure it so it does not need the d3dcompiler_* DLL at all (for details on this, see their documentation). However, by default SDL will try to preload the d3dcompiler_46.dll to comply with ANGLE's requirements. If you wish SDL to preload d3dcompiler_43.dll (to support Windows XP) or to skip this step at all, you can use the SDL_HINT_VIDEO_WIN_D3DCOMPILER hint (see SDL_hints.h for more details).</p>
<p>Known Bugs: </p><pre class="fragment">* SDL_GL_SetSwapInterval is currently a no op when using ANGLE. It appears
  that there's a bug in the library which prevents the window contents from
  refreshing if this is set to anything other than the default value.
</pre><h1><a class="anchor" id="autotoc_md120"></a>
Vulkan Surface Support</h1>
<p>Support for creating Vulkan surfaces is configured on by default. To disable it change the value of <code>SDL_VIDEO_VULKAN</code> to 0 in <code>SDL_config_windows.h</code>. You must install the <a href="https://www.lunarg.com/vulkan-sdk/">Vulkan SDK</a> in order to use Vulkan graphics in your application.</p>
<p>This port allows SDL applications to run on Microsoft's platforms that require use of "Windows Runtime", aka. "WinRT", APIs. Microsoft may, in some cases, refer to them as either "Windows Store", or for Windows 10, "UWP" apps.</p>
<p>Some of the operating systems that include WinRT, are:</p>
<ul>
<li>Windows 10, via its Universal Windows Platform (UWP) APIs</li>
<li>Windows 8.x</li>
<li>Windows RT 8.x (aka. Windows 8.x for ARM processors)</li>
<li>Windows Phone 8.x</li>
</ul>
<h1><a class="anchor" id="autotoc_md121"></a>
Requirements</h1>
<ul>
<li>Microsoft Visual C++ (aka Visual Studio), either 2017, 2015, 2013, or 2012<ul>
<li>Free, "Community" or "Express" editions may be used, so long as they include support for either "Windows Store" or "Windows Phone" apps. "Express" versions marked as supporting "Windows Desktop" development typically do not include support for creating WinRT apps, to note. (The "Community" editions of Visual C++ do, however, support both desktop/Win32 and WinRT development).</li>
<li>Visual Studio 2017 can be used, however it is recommended that you install the Visual C++ 2015 build tools. These build tools can be installed using VS 2017's installer. Be sure to also install the workload for "Universal Windows Platform development", its optional component, the "C++ Universal Windows Platform tools", and for UWP / Windows 10 development, the "Windows 10 SDK (10.0.10240.0)". Please note that targeting UWP / Windows 10 apps from development machine(s) running earlier versions of Windows, such as Windows 7, is not always supported by Visual Studio, and you may get error(s) when attempting to do so.</li>
<li>Visual C++ 2012 can only build apps that target versions 8.0 of Windows, or Windows Phone. 8.0-targeted apps will run on devices running 8.1 editions of Windows, however they will not be able to take advantage of 8.1-specific features.</li>
<li>Visual C++ 2013 cannot create app projects that target Windows 8.0. Visual C++ 2013 Update 4, can create app projects for Windows Phone 8.0, Windows Phone 8.1, and Windows 8.1, but not Windows 8.0. An optional Visual Studio add-in, "Tools for Maintaining Store apps for Windows 8", allows Visual C++ 2013 to load and build Windows 8.0 projects that were created with Visual C++ 2012, so long as Visual C++ 2012 is installed on the same machine. More details on targeting different versions of Windows can found at the following web pages:<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/windows/apps/br211384.aspx">Develop apps by using Visual Studio 2013</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/windows/apps/dn263114.aspx#AddMaintenanceTools">To add the Tools for Maintaining Store apps for Windows 8</a></li>
</ul>
</li>
</ul>
</li>
<li>A valid Microsoft account - This requirement is not imposed by SDL, but rather by Microsoft's Visual C++ toolchain. This is required to launch or debug apps.</li>
</ul>
<h1><a class="anchor" id="autotoc_md122"></a>
Status</h1>
<p>Here is a rough list of what works, and what doesn't:</p>
<ul>
<li>What works:<ul>
<li>compilation via Visual C++ 2012 through 2015</li>
<li>compile-time platform detection for SDL programs. The C/C++ #define, <code>__WINRT__</code>, will be set to 1 (by SDL) when compiling for WinRT.</li>
<li>GPU-accelerated 2D rendering, via SDL_Renderer.</li>
<li>OpenGL ES 2, via the ANGLE library (included separately from SDL)</li>
<li>software rendering, via either <a class="el" href="struct_s_d_l___surface.html" title="A collection of pixels used in software blitting.">SDL_Surface</a> (optionally in conjunction with <a class="el" href="_s_d_l__video_8h.html#a0f7a1d102e1d5dd2d739ad70fe268385" title="Get the SDL surface associated with the window.">SDL_GetWindowSurface()</a> and <a class="el" href="_s_d_l__video_8h.html#a7bbfee05788dc85a1d67218cf3006653" title="Copy the window surface to the screen.">SDL_UpdateWindowSurface()</a>) or via the SDL_Renderer APIs</li>
<li>threads</li>
<li>timers (via <a class="el" href="_s_d_l__timer_8h.html#a0b9bc71d6287e0ffafdc3419760fe2b3" title="Get the number of milliseconds since the SDL library initialization.">SDL_GetTicks()</a>, <a class="el" href="_s_d_l__timer_8h.html#a56ceea49587e3fa5796b2e4bf85603b8" title="Add a new timer to the pool of timers already running.">SDL_AddTimer()</a>, <a class="el" href="_s_d_l__timer_8h.html#a2dbeb63c4f0564811a4adf3938808977" title="Get the current value of the high resolution counter.">SDL_GetPerformanceCounter()</a>, <a class="el" href="_s_d_l__timer_8h.html#a507ebea12e31dacc9f85f7d9febe0efb" title="Get the count per second of the high resolution counter.">SDL_GetPerformanceFrequency()</a>, etc.)</li>
<li>file I/O via <a class="el" href="struct_s_d_l___r_wops.html">SDL_RWops</a></li>
<li>mouse input (unsupported on Windows Phone)</li>
<li>audio, via SDL's WASAPI backend (if you want to record, your app must have "Microphone" capabilities enabled in its manifest, and the user must not have blocked access. Otherwise, capture devices will fail to work, presenting as a device disconnect shortly after opening it.)</li>
<li>.DLL file loading. Libraries <em>MUST</em> be packaged inside applications. Loading anything outside of the app is not supported.</li>
<li>system path retrieval via SDL's filesystem APIs</li>
<li>game controllers. Support is provided via the SDL_Joystick and SDL_GameController APIs, and is backed by Microsoft's XInput API. Please note, however, that Windows limits game-controller support in UWP apps to, "Xbox compatible controllers" (many controllers that work in Win32 apps, do not work in UWP, due to restrictions in UWP itself.)</li>
<li>multi-touch input</li>
<li>app events. SDL_APP_WILLENTER* and SDL_APP_DIDENTER* events get sent out as appropriate.</li>
<li>window events</li>
<li>using Direct3D 11.x APIs outside of SDL. Non-XAML / Direct3D-only apps can choose to render content directly via Direct3D, using SDL to manage the internal WinRT window, as well as input and audio. (Use <a class="el" href="_s_d_l__syswm_8h.html#ad6e40121a96c88af20d9469a04706fef" title="This function allows access to driver-dependent window information.">SDL_GetWindowWMInfo()</a> to get the WinRT 'CoreWindow', and pass it into IDXGIFactory2::CreateSwapChainForCoreWindow() as appropriate.)</li>
</ul>
</li>
<li>What partially works:<ul>
<li>keyboard input. Most of WinRT's documented virtual keys are supported, as well as many keys with documented hardware scancodes. Converting SDL_Scancodes to or from SDL_Keycodes may not work, due to missing APIs (MapVirtualKey()) in Microsoft's Windows Store / UWP APIs.</li>
<li>SDLmain. WinRT uses a different signature for each app's <a class="el" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> function. SDL-based apps that use this port must compile in SDL_winrt_main_NonXAML.cpp (in <code>SDL\src\main\winrt\</code>) directly in order for their C-style <a class="el" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> functions to be called.</li>
</ul>
</li>
<li>What doesn't work:<ul>
<li>compilation with anything other than Visual C++</li>
<li>programmatically-created custom cursors. These don't appear to be supported by WinRT. Different OS-provided cursors can, however, be created via <a class="el" href="_s_d_l__mouse_8h.html#a217c89743b3da84b9656304f8e4ca51e" title="Create a system cursor.">SDL_CreateSystemCursor()</a> (unsupported on Windows Phone)</li>
<li><a class="el" href="_s_d_l__mouse_8h.html#a2f2259cdf30272b3c4cc1e3236cb8071" title="Moves the mouse to the given position within the window.">SDL_WarpMouseInWindow()</a> or <a class="el" href="_s_d_l__mouse_8h.html#a200c3d105a0a30fb465760ab870b3ce3" title="Moves the mouse to the given position in global screen space.">SDL_WarpMouseGlobal()</a>. This are not currently supported by WinRT itself.</li>
<li>joysticks and game controllers that either are not supported by Microsoft's XInput API, or are not supported within UWP apps (many controllers that work in Win32, do not work in UWP, due to restrictions in UWP itself).</li>
<li>turning off VSync when rendering on Windows Phone. Attempts to turn VSync off on Windows Phone result either in Direct3D not drawing anything, or it forcing VSync back on. As such, SDL_RENDERER_PRESENTVSYNC will always get turned-on on Windows Phone. This limitation is not present in non-Phone WinRT (such as Windows 8.x), where turning off VSync appears to work.</li>
<li>probably anything else that's not listed as supported</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md123"></a>
Upgrade Notes</h1>
<h3><a class="anchor" id="autotoc_md124"></a>
SDL_GetPrefPath() usage when upgrading WinRT apps from SDL 2.0.3</h3>
<p>SDL 2.0.4 fixes two bugs found in the WinRT version of <a class="el" href="_s_d_l__filesystem_8h.html#ab11eaf74d913eefb472475f0c8e312ce" title="Get the user-and-app-specific path where files can be written.">SDL_GetPrefPath()</a>. The fixes may affect older, SDL 2.0.3-based apps' save data. Please note that these changes only apply to SDL-based WinRT apps, and not to apps for any other platform.</p>
<ol type="1">
<li><a class="el" href="_s_d_l__filesystem_8h.html#ab11eaf74d913eefb472475f0c8e312ce" title="Get the user-and-app-specific path where files can be written.">SDL_GetPrefPath()</a> would return an invalid path, one in which the path's directory had not been created. Attempts to create files there (via fopen(), for example), would fail, unless that directory was explicitly created beforehand.</li>
<li><a class="el" href="_s_d_l__filesystem_8h.html#ab11eaf74d913eefb472475f0c8e312ce" title="Get the user-and-app-specific path where files can be written.">SDL_GetPrefPath()</a>, for non-WinPhone-based apps, would return a path inside a WinRT 'Roaming' folder, the contents of which get automatically synchronized across multiple devices. This process can occur while an application runs, and can cause existing save-data to be overwritten at unexpected times, with data from other devices. (Windows Phone apps written with SDL 2.0.3 did not utilize a Roaming folder, due to API restrictions in Windows Phone 8.0).</li>
</ol>
<p><a class="el" href="_s_d_l__filesystem_8h.html#ab11eaf74d913eefb472475f0c8e312ce" title="Get the user-and-app-specific path where files can be written.">SDL_GetPrefPath()</a>, starting with SDL 2.0.4, addresses these by:</p>
<ol type="1">
<li>making sure that <a class="el" href="_s_d_l__filesystem_8h.html#ab11eaf74d913eefb472475f0c8e312ce" title="Get the user-and-app-specific path where files can be written.">SDL_GetPrefPath()</a> returns a directory in which data can be written to immediately, without first needing to create directories.</li>
<li>basing <a class="el" href="_s_d_l__filesystem_8h.html#ab11eaf74d913eefb472475f0c8e312ce" title="Get the user-and-app-specific path where files can be written.">SDL_GetPrefPath()</a> off of a different, non-Roaming folder, the contents of which do not automatically get synchronized across devices (and which require less work to use safely, in terms of data integrity).</li>
</ol>
<p>Apps that wish to get their Roaming folder's path can do so either by using SDL_WinRTGetFSPathUTF8(), SDL_WinRTGetFSPathUNICODE() (which returns a UCS-2/wide-char string), or directly through the WinRT class, Windows.Storage.ApplicationData.</p>
<h1><a class="anchor" id="autotoc_md125"></a>
Setup, High-Level Steps</h1>
<p>The steps for setting up a project for an SDL/WinRT app looks like the following, at a high-level:</p>
<ol type="1">
<li>create a new Visual C++ project using Microsoft's template for a, "Direct3D App".</li>
<li>remove most of the files from the project.</li>
<li>make your app's project directly reference SDL/WinRT's own Visual C++ project file, via use of Visual C++'s "References" dialog. This will setup the linker, and will copy SDL's .dll files to your app's final output.</li>
<li>adjust your app's build settings, at minimum, telling it where to find SDL's header files.</li>
<li>add files that contains a WinRT-appropriate main function, along with some data to make sure mouse-cursor-hiding (via SDL_ShowCursor(SDL_DISABLE) calls) work properly.</li>
<li>add SDL-specific app code.</li>
<li>build and run your app.</li>
</ol>
<h1><a class="anchor" id="autotoc_md126"></a>
Setup, Detailed Steps</h1>
<h2><a class="anchor" id="autotoc_md127"></a>
1. Create a new project</h2>
<p>Create a new project using one of Visual C++'s templates for a plain, non-XAML, "Direct3D App" (XAML support for SDL/WinRT is not yet ready for use). If you don't see one of these templates, in Visual C++'s 'New Project' dialog, try using the textbox titled, 'Search Installed Templates' to look for one.</p>
<h2><a class="anchor" id="autotoc_md128"></a>
2. Remove unneeded files from the project</h2>
<p>In the new project, delete any file that has one of the following extensions:</p>
<ul>
<li>.cpp</li>
<li>.h</li>
<li>.hlsl</li>
</ul>
<p>When you are done, you should be left with a few files, each of which will be a necessary part of your app's project. These files will consist of:</p>
<ul>
<li>an .appxmanifest file, which contains metadata on your WinRT app. This is similar to an Info.plist file on iOS, or an AndroidManifest.xml on Android.</li>
<li>a few .png files, one of which is a splash screen (displayed when your app launches), others are app icons.</li>
<li>a .pfx file, used for code signing purposes.</li>
</ul>
<h2><a class="anchor" id="autotoc_md129"></a>
3. Add references to SDL's project files</h2>
<p>SDL/WinRT can be built in multiple variations, spanning across three different CPU architectures (x86, x64, and ARM) and two different configurations (Debug and Release). WinRT and Visual C++ do not currently provide a means for combining multiple variations of one library into a single file. Furthermore, it does not provide an easy means for copying pre-built .dll files into your app's final output (via Post-Build steps, for example). It does, however, provide a system whereby an app can reference the MSVC projects of libraries such that, when the app is built:</p>
<ol type="1">
<li>each library gets built for the appropriate CPU architecture(s) and WinRT platform(s).</li>
<li>each library's output, such as .dll files, get copied to the app's build output.</li>
</ol>
<p>To set this up for SDL/WinRT, you'll need to run through the following steps:</p>
<ol type="1">
<li>open up the Solution Explorer inside Visual C++ (under the "View" menu, then "Solution Explorer")</li>
<li>right click on your app's solution.</li>
<li>navigate to "Add", then to "Existing Project..."</li>
<li>find SDL/WinRT's Visual C++ project file and open it. Different project files exist for different WinRT platforms. All of them are in SDL's source distribution, in the following directories:<ul>
<li><code>VisualC-WinRT/UWP_VS2015/</code> - for Windows 10 / UWP apps</li>
<li><code>VisualC-WinRT/WinPhone81_VS2013/</code> - for Windows Phone 8.1 apps</li>
<li><code>VisualC-WinRT/WinRT80_VS2012/</code> - for Windows 8.0 apps</li>
<li><code>VisualC-WinRT/WinRT81_VS2013/</code> - for Windows 8.1 apps</li>
</ul>
</li>
<li>once the project has been added, right-click on your app's project and select, "References..."</li>
<li>click on the button titled, "Add New Reference..."</li>
<li>check the box next to SDL</li>
<li>click OK to close the dialog</li>
<li>SDL will now show up in the list of references. Click OK to close that dialog.</li>
</ol>
<p>Your project is now linked to SDL's project, insofar that when the app is built, SDL will be built as well, with its build output getting included with your app.</p>
<h2><a class="anchor" id="autotoc_md130"></a>
4. Adjust Your App's Build Settings</h2>
<p>Some build settings need to be changed in your app's project. This guide will outline the following:</p>
<ul>
<li>making sure that the compiler knows where to find SDL's header files</li>
<li><b>Optional for C++, but NECESSARY for compiling C code:</b> telling the compiler not to use Microsoft's C++ extensions for WinRT development.</li>
<li><b>Optional:</b> telling the compiler not generate errors due to missing precompiled header files.</li>
</ul>
<p>To change these settings:</p>
<ol type="1">
<li>right-click on the project</li>
<li>choose "Properties"</li>
<li>in the drop-down box next to "Configuration", choose, "All Configurations"</li>
<li>in the drop-down box next to "Platform", choose, "All Platforms"</li>
<li>in the left-hand list, expand the "C/C++" section</li>
<li>select "General"</li>
<li>edit the "Additional Include Directories" setting, and add a path to SDL's "include" directory</li>
<li><b>Optional: to enable compilation of C code:</b> change the setting for "Consume Windows Runtime Extension" from "Yes (/ZW)" to "No". If you're working with a completely C++ based project, this step can usually be omitted.</li>
<li><b>Optional: to disable precompiled headers (which can produce 'stdafx.h'-related build errors, if setup incorrectly:</b> in the left-hand list, select "Precompiled Headers", then change the setting for "Precompiled 
   Header" from "Use (/Yu)" to "Not Using Precompiled Headers".</li>
<li>close the dialog, saving settings, by clicking the "OK" button</li>
</ol>
<h2><a class="anchor" id="autotoc_md131"></a>
5. Add a WinRT-appropriate main function, and a blank-cursor image, to the app.</h2>
<p>A few files should be included directly in your app's MSVC project, specifically:</p><ol type="1">
<li>a WinRT-appropriate main function (which is different than <a class="el" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> functions on other platforms)</li>
<li>a Win32-style cursor resource, used by <a class="el" href="_s_d_l__mouse_8h.html#a00286ec15cd56dee1fd71ed4e6e7a585" title="Toggle whether or not the cursor is shown.">SDL_ShowCursor()</a> to hide the mouse cursor (if and when the app needs to do so). <em>If this cursor resource is not included, mouse-position reporting may fail if and when the cursor is hidden, due to possible bugs/design-oddities in Windows itself.</em></li>
</ol>
<p>To include these files for C/C++ projects:</p>
<ol type="1">
<li>right-click on your project (again, in Visual C++'s Solution Explorer), navigate to "Add", then choose "Existing Item...".</li>
<li>navigate to the directory containing SDL's source code, then into its subdirectory, 'src/main/winrt/'. Select, then add, the following files:<ul>
<li><code>SDL_winrt_main_NonXAML.cpp</code></li>
<li><code>SDL2-WinRTResources.rc</code></li>
<li><code>SDL2-WinRTResource_BlankCursor.cur</code></li>
</ul>
</li>
<li>right-click on the file <code>SDL_winrt_main_NonXAML.cpp</code> (as listed in your project), then click on "Properties...".</li>
<li>in the drop-down box next to "Configuration", choose, "All Configurations"</li>
<li>in the drop-down box next to "Platform", choose, "All Platforms"</li>
<li>in the left-hand list, click on "C/C++"</li>
<li>change the setting for "Consume Windows Runtime Extension" to "Yes (/ZW)".</li>
<li>click the OK button. This will close the dialog.</li>
</ol>
<p><b>NOTE: C++/CX compilation is currently required in at least one file of your app's project. This is to make sure that Visual C++'s linker builds a 'Windows Metadata' file (.winmd) for your app. Not doing so can lead to build errors.</b></p>
<p>For non-C++ projects, you will need to call SDL_WinRTRunApp from your language's main function, and generate SDL2-WinRTResources.res manually by using <code>rc</code> via the Developer Command Prompt and including it as a &lt;Win32Resource&gt; within the first &lt;PropertyGroup&gt; block in your Visual Studio project file.</p>
<h2><a class="anchor" id="autotoc_md132"></a>
6. Add app code and assets</h2>
<p>At this point, you can add in SDL-specific source code. Be sure to include a C-style main function (ie: <code>int main(int argc, char *argv[])</code>). From there you should be able to create a single <code>SDL_Window</code> (WinRT apps can only have one window, at present), as well as an <code>SDL_Renderer</code>. Direct3D will be used to draw content. Events are received via SDL's usual event functions (<code>SDL_PollEvent</code>, etc.) If you have a set of existing source files and assets, you can start adding them to the project now. If not, or if you would like to make sure that you're setup correctly, some short and simple sample code is provided below.</p>
<h3><a class="anchor" id="autotoc_md133"></a>
6.A. ... when creating a new app</h3>
<p>If you are creating a new app (rather than porting an existing SDL-based app), or if you would just like a simple app to test SDL/WinRT with before trying to get existing code working, some working SDL/WinRT code is provided below. To set this up:</p>
<ol type="1">
<li>right click on your app's project</li>
<li>select Add, then New Item. An "Add New Item" dialog will show up.</li>
<li>from the left-hand list, choose "Visual C++"</li>
<li>from the middle/main list, choose "C++ File (.cpp)"</li>
<li>near the bottom of the dialog, next to "Name:", type in a name for your source file, such as, "main.cpp".</li>
<li>click on the Add button. This will close the dialog, add the new file to your project, and open the file in Visual C++'s text editor.</li>
<li>Copy and paste the following code into the new file, then save it.</li>
</ol>
<pre class="fragment">#include &lt;SDL.h&gt;

int main(int argc, char **argv)
{
    SDL_DisplayMode mode;
    SDL_Window * window = NULL;
    SDL_Renderer * renderer = NULL;
    SDL_Event evt;

    if (SDL_Init(SDL_INIT_VIDEO) != 0) {
        return 1;
    }

    if (SDL_GetCurrentDisplayMode(0, &amp;mode) != 0) {
        return 1;
    }

    if (SDL_CreateWindowAndRenderer(mode.w, mode.h, SDL_WINDOW_FULLSCREEN, &amp;window, &amp;renderer) != 0) {
        return 1;
    }

    while (1) {
        while (SDL_PollEvent(&amp;evt)) {
        }

        SDL_SetRenderDrawColor(renderer, 0, 255, 0, 255);
        SDL_RenderClear(renderer);
        SDL_RenderPresent(renderer);
    }
}
</pre><h3><a class="anchor" id="autotoc_md134"></a>
6.B. Adding code and assets</h3>
<p>If you have existing code and assets that you'd like to add, you should be able to add them now. The process for adding a set of files is as such.</p>
<ol type="1">
<li>right click on the app's project</li>
<li>select Add, then click on "New Item..."</li>
<li>open any source, header, or asset files as appropriate. Support for C and C++ is available.</li>
</ol>
<p>Do note that WinRT only supports a subset of the APIs that are available to Win32-based apps. Many portions of the Win32 API and the C runtime are not available.</p>
<p>A list of unsupported C APIs can be found at <a href="http://msdn.microsoft.com/en-us/library/windows/apps/jj606124.aspx">http://msdn.microsoft.com/en-us/library/windows/apps/jj606124.aspx</a></p>
<p>General information on using the C runtime in WinRT can be found at <a href="https://msdn.microsoft.com/en-us/library/hh972425.aspx">https://msdn.microsoft.com/en-us/library/hh972425.aspx</a></p>
<p>A list of supported Win32 APIs for WinRT apps can be found at <a href="http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx">http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx</a>. To note, the list of supported Win32 APIs for Windows Phone 8.0 is different. <br  />
 That list can be found at <a href="http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662956(v=vs.105).aspx">http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662956(v=vs.105).aspx</a></p>
<h2><a class="anchor" id="autotoc_md135"></a>
7. Build and run your app</h2>
<p>Your app project should now be setup, and you should be ready to build your app. <br  />
 To run it on the local machine, open the Debug menu and choose "Start 
Debugging". This will build your app, then run your app full-screen. To switch out of your app, press the Windows key. Alternatively, you can choose to run your app in a window. To do this, before building and running your app, find the drop-down menu in Visual C++'s toolbar that says, "Local Machine". Expand this by clicking on the arrow on the right side of the list, then click on Simulator. Once you do that, any time you build and run the app, the app will launch in window, rather than full-screen.</p>
<h3><a class="anchor" id="autotoc_md136"></a>
7.A. Running apps on older, ARM-based, "Windows RT" devices</h3>
<p><b>These instructions do not include Windows Phone, despite Windows Phone typically running on ARM processors.</b> They are specifically for devices that use the "Windows RT" operating system, which was a modified version of Windows 8.x that ran primarily on ARM-based tablet computers.</p>
<p>To build and run the app on ARM-based, "Windows RT" devices, you'll need to:</p>
<ul>
<li>install Microsoft's "Remote Debugger" on the device. Visual C++ installs and debugs ARM-based apps via IP networks.</li>
<li>change a few options on the development machine, both to make sure it builds for ARM (rather than x86 or x64), and to make sure it knows how to find the Windows RT device (on the network).</li>
</ul>
<p>Microsoft's Remote Debugger can be found at <a href="https://msdn.microsoft.com/en-us/library/hh441469.aspx">https://msdn.microsoft.com/en-us/library/hh441469.aspx</a>. Please note that separate versions of this debugger exist for different versions of Visual C++, one each for MSVC 2015, 2013, and 2012.</p>
<p>To setup Visual C++ to launch your app on an ARM device:</p>
<ol type="1">
<li>make sure the Remote Debugger is running on your ARM device, and that it's on the same IP network as your development machine.</li>
<li>from Visual C++'s toolbar, find a drop-down menu that says, "Win32". Click it, then change the value to "ARM".</li>
<li>make sure Visual C++ knows the hostname or IP address of the ARM device. To do this:<ol type="a">
<li>open the app project's properties</li>
<li>select "Debugging"</li>
<li>next to "Machine Name", enter the hostname or IP address of the ARM device</li>
<li>if, and only if, you've turned off authentication in the Remote Debugger, then change the setting for "Require Authentication" to No</li>
<li>click "OK"</li>
</ol>
</li>
<li>build and run the app (from Visual C++). The first time you do this, a prompt will show up on the ARM device, asking for a Microsoft Account. You do, unfortunately, need to log in here, and will need to follow the subsequent registration steps in order to launch the app. After you do so, if the app didn't already launch, try relaunching it again from within Visual C++.</li>
</ol>
<h1><a class="anchor" id="autotoc_md137"></a>
Troubleshooting</h1>
<h3><a class="anchor" id="autotoc_md138"></a>
Build fails with message, "error LNK2038: mismatch detected for 'vccorlib_lib_should_be_specified_before_msvcrt_lib_to_linker'"</h3>
<p>Try adding the following to your linker flags. In MSVC, this can be done by right-clicking on the app project, navigating to Configuration Properties -&gt; Linker -&gt; Command Line, then adding them to the Additional Options section.</p>
<ul>
<li><p class="startli">For Release builds / MSVC-Configurations, add:</p>
<p class="startli">/nodefaultlib:vccorlib /nodefaultlib:msvcrt vccorlib.lib msvcrt.lib</p>
</li>
<li><p class="startli">For Debug builds / MSVC-Configurations, add:</p>
<p class="startli">/nodefaultlib:vccorlibd /nodefaultlib:msvcrtd vccorlibd.lib msvcrtd.lib</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md139"></a>
Mouse-motion events fail to get sent, or SDL_GetMouseState() fails to return updated values</h3>
<p>This may be caused by a bug in Windows itself, whereby hiding the mouse cursor can cause mouse-position reporting to fail.</p>
<p>SDL provides a workaround for this, but it requires that an app links to a set of Win32-style cursor image-resource files. A copy of suitable resource files can be found in <code>src/main/winrt/</code>. Adding them to an app's Visual C++ project file should be sufficient to get the app to use them.</p>
<h3><a class="anchor" id="autotoc_md140"></a>
SDL's Visual Studio project file fails to open, with message, "The system can't find the file specified."</h3>
<p>This can be caused for any one of a few reasons, which Visual Studio can report, but won't always do so in an up-front manner.</p>
<p>To help determine why this error comes up:</p>
<ol type="1">
<li>open a copy of Visual Studio without opening a project file. This can be accomplished via Windows' Start Menu, among other means.</li>
<li>show Visual Studio's Output window. This can be done by going to VS' menu bar, then to View, and then to Output.</li>
<li>try opening the SDL project file directly by going to VS' menu bar, then to File, then to Open, then to Project/Solution. When a File-Open dialog appears, open the SDL project (such as the one in SDL's source code, in its directory, VisualC-WinRT/UWP_VS2015/).</li>
<li>after attempting to open SDL's Visual Studio project file, additional error information will be output to the Output window.</li>
</ol>
<p>If Visual Studio reports (via its Output window) that the project:</p>
<p>"could not be loaded because it's missing install components. To fix this launch Visual Studio setup with the following selections:
Microsoft.VisualStudio.ComponentGroup.UWP.VC"</p>
<p>... then you will need to re-launch Visual Studio's installer, and make sure that the workflow for "Universal Windows Platform development" is checked, and that its optional component, "C++ Universal Windows Platform tools" is also checked. While you are there, if you are planning on targeting UWP / Windows 10, also make sure that you check the optional component, "Windows 10 SDK (10.0.10240.0)". After making sure these items are checked as-appropriate, install them.</p>
<p>Once you install these components, try re-launching Visual Studio, and re-opening the SDL project file. If you still get the error dialog, try using the Output window, again, seeing what Visual Studio says about it.</p>
<h3><a class="anchor" id="autotoc_md141"></a>
Game controllers / joysticks aren't working!</h3>
<p>Windows only permits certain game controllers and joysticks to work within WinRT / UWP apps. Even if a game controller or joystick works in a Win32 app, that device is not guaranteed to work inside a WinRT / UWP app.</p>
<p>According to Microsoft, "Xbox compatible controllers" should work inside UWP apps, potentially with more working in the future. This includes, but may not be limited to, Microsoft-made Xbox controllers and USB adapters. (Source: <a href="https://social.msdn.microsoft.com/Forums/en-US/9064838b-e8c3-4c18-8a83-19bf0dfe150d/xinput-fails-to-detect-game-controllers?forum=wpdevelop">https://social.msdn.microsoft.com/Forums/en-US/9064838b-e8c3-4c18-8a83-19bf0dfe150d/xinput-fails-to-detect-game-controllers?forum=wpdevelop</a>) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
